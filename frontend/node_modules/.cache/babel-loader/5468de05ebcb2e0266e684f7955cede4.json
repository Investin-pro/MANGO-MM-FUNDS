{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.map = exports.array = exports.rustEnum = exports.str = exports.vecU8 = exports.tagged = exports.vec = exports.bool = exports.option = exports.publicKey = exports.i128 = exports.u128 = exports.i64 = exports.u64 = exports.struct = exports.f64 = exports.f32 = exports.i32 = exports.u32 = exports.i16 = exports.u16 = exports.i8 = exports.u8 = void 0;\n\nconst buffer_layout_1 = require(\"buffer-layout\");\n\nconst web3_js_1 = require(\"@solana/web3.js\");\n\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\n\nvar buffer_layout_2 = require(\"buffer-layout\");\n\nObject.defineProperty(exports, \"u8\", {\n  enumerable: true,\n  get: function () {\n    return buffer_layout_2.u8;\n  }\n});\nObject.defineProperty(exports, \"i8\", {\n  enumerable: true,\n  get: function () {\n    return buffer_layout_2.s8;\n  }\n});\nObject.defineProperty(exports, \"u16\", {\n  enumerable: true,\n  get: function () {\n    return buffer_layout_2.u16;\n  }\n});\nObject.defineProperty(exports, \"i16\", {\n  enumerable: true,\n  get: function () {\n    return buffer_layout_2.s16;\n  }\n});\nObject.defineProperty(exports, \"u32\", {\n  enumerable: true,\n  get: function () {\n    return buffer_layout_2.u32;\n  }\n});\nObject.defineProperty(exports, \"i32\", {\n  enumerable: true,\n  get: function () {\n    return buffer_layout_2.s32;\n  }\n});\nObject.defineProperty(exports, \"f32\", {\n  enumerable: true,\n  get: function () {\n    return buffer_layout_2.f32;\n  }\n});\nObject.defineProperty(exports, \"f64\", {\n  enumerable: true,\n  get: function () {\n    return buffer_layout_2.f64;\n  }\n});\nObject.defineProperty(exports, \"struct\", {\n  enumerable: true,\n  get: function () {\n    return buffer_layout_2.struct;\n  }\n});\n\nclass BNLayout extends buffer_layout_1.Layout {\n  constructor(span, signed, property) {\n    super(span, property);\n    this.blob = buffer_layout_1.blob(span);\n    this.signed = signed;\n  }\n\n  decode(b) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const num = new bn_js_1.default(this.blob.decode(b, offset), 10, 'le');\n\n    if (this.signed) {\n      return num.fromTwos(this.span * 8).clone();\n    }\n\n    return num;\n  }\n\n  encode(src, b) {\n    let offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    if (this.signed) {\n      src = src.toTwos(this.span * 8);\n    }\n\n    return this.blob.encode(src.toArrayLike(Buffer, 'le', this.span), b, offset);\n  }\n\n}\n\nfunction u64(property) {\n  return new BNLayout(8, false, property);\n}\n\nexports.u64 = u64;\n\nfunction i64(property) {\n  return new BNLayout(8, true, property);\n}\n\nexports.i64 = i64;\n\nfunction u128(property) {\n  return new BNLayout(16, false, property);\n}\n\nexports.u128 = u128;\n\nfunction i128(property) {\n  return new BNLayout(16, true, property);\n}\n\nexports.i128 = i128;\n\nclass WrappedLayout extends buffer_layout_1.Layout {\n  constructor(layout, decoder, encoder, property) {\n    super(layout.span, property);\n    this.layout = layout;\n    this.decoder = decoder;\n    this.encoder = encoder;\n  }\n\n  decode(b, offset) {\n    return this.decoder(this.layout.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return this.layout.encode(this.encoder(src), b, offset);\n  }\n\n  getSpan(b, offset) {\n    return this.layout.getSpan(b, offset);\n  }\n\n}\n\nfunction publicKey(property) {\n  return new WrappedLayout(buffer_layout_1.blob(32), b => new web3_js_1.PublicKey(b), key => key.toBuffer(), property);\n}\n\nexports.publicKey = publicKey;\n\nclass OptionLayout extends buffer_layout_1.Layout {\n  constructor(layout, property) {\n    super(-1, property);\n    this.layout = layout;\n    this.discriminator = buffer_layout_1.u8();\n  }\n\n  encode(src, b) {\n    let offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    if (src === null || src === undefined) {\n      return this.discriminator.encode(0, b, offset);\n    }\n\n    this.discriminator.encode(1, b, offset);\n    return this.layout.encode(src, b, offset + 1) + 1;\n  }\n\n  decode(b) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const discriminator = this.discriminator.decode(b, offset);\n\n    if (discriminator === 0) {\n      return null;\n    } else if (discriminator === 1) {\n      return this.layout.decode(b, offset + 1);\n    }\n\n    throw new Error('Invalid option ' + this.property);\n  }\n\n  getSpan(b) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const discriminator = this.discriminator.decode(b, offset);\n\n    if (discriminator === 0) {\n      return 1;\n    } else if (discriminator === 1) {\n      return this.layout.getSpan(b, offset + 1) + 1;\n    }\n\n    throw new Error('Invalid option ' + this.property);\n  }\n\n}\n\nfunction option(layout, property) {\n  return new OptionLayout(layout, property);\n}\n\nexports.option = option;\n\nfunction bool(property) {\n  return new WrappedLayout(buffer_layout_1.u8(), decodeBool, encodeBool, property);\n}\n\nexports.bool = bool;\n\nfunction decodeBool(value) {\n  if (value === 0) {\n    return false;\n  } else if (value === 1) {\n    return true;\n  }\n\n  throw new Error('Invalid bool: ' + value);\n}\n\nfunction encodeBool(value) {\n  return value ? 1 : 0;\n}\n\nfunction vec(elementLayout, property) {\n  const length = buffer_layout_1.u32('length');\n  const layout = buffer_layout_1.struct([length, buffer_layout_1.seq(elementLayout, buffer_layout_1.offset(length, -length.span), 'values')]);\n  return new WrappedLayout(layout, _ref => {\n    let {\n      values\n    } = _ref;\n    return values;\n  }, values => ({\n    values\n  }), property);\n}\n\nexports.vec = vec;\n\nfunction tagged(tag, layout, property) {\n  const wrappedLayout = buffer_layout_1.struct([u64('tag'), layout.replicate('data')]);\n\n  function decodeTag(_ref2) {\n    let {\n      tag: receivedTag,\n      data\n    } = _ref2;\n\n    if (!receivedTag.eq(tag)) {\n      throw new Error('Invalid tag, expected: ' + tag.toString('hex') + ', got: ' + receivedTag.toString('hex'));\n    }\n\n    return data;\n  }\n\n  return new WrappedLayout(wrappedLayout, decodeTag, data => ({\n    tag,\n    data\n  }), property);\n}\n\nexports.tagged = tagged;\n\nfunction vecU8(property) {\n  const length = buffer_layout_1.u32('length');\n  const layout = buffer_layout_1.struct([length, buffer_layout_1.blob(buffer_layout_1.offset(length, -length.span), 'data')]);\n  return new WrappedLayout(layout, _ref3 => {\n    let {\n      data\n    } = _ref3;\n    return data;\n  }, data => ({\n    data\n  }), property);\n}\n\nexports.vecU8 = vecU8;\n\nfunction str(property) {\n  return new WrappedLayout(vecU8(), data => data.toString('utf-8'), s => Buffer.from(s, 'utf-8'), property);\n}\n\nexports.str = str;\n\nfunction rustEnum(variants, property, discriminant) {\n  const unionLayout = buffer_layout_1.union(discriminant !== null && discriminant !== void 0 ? discriminant : buffer_layout_1.u8(), property);\n  variants.forEach((variant, index) => unionLayout.addVariant(index, variant, variant.property));\n  return unionLayout;\n}\n\nexports.rustEnum = rustEnum;\n\nfunction array(elementLayout, length, property) {\n  const layout = buffer_layout_1.struct([buffer_layout_1.seq(elementLayout, length, 'values')]);\n  return new WrappedLayout(layout, _ref4 => {\n    let {\n      values\n    } = _ref4;\n    return values;\n  }, values => ({\n    values\n  }), property);\n}\n\nexports.array = array;\n\nclass MapEntryLayout extends buffer_layout_1.Layout {\n  constructor(keyLayout, valueLayout, property) {\n    super(keyLayout.span + valueLayout.span, property);\n    this.keyLayout = keyLayout;\n    this.valueLayout = valueLayout;\n  }\n\n  decode(b, offset) {\n    offset = offset || 0;\n    const key = this.keyLayout.decode(b, offset);\n    const value = this.valueLayout.decode(b, offset + this.keyLayout.getSpan(b, offset));\n    return [key, value];\n  }\n\n  encode(src, b, offset) {\n    offset = offset || 0;\n    const keyBytes = this.keyLayout.encode(src[0], b, offset);\n    const valueBytes = this.valueLayout.encode(src[1], b, offset + keyBytes);\n    return keyBytes + valueBytes;\n  }\n\n  getSpan(b, offset) {\n    return this.keyLayout.getSpan(b, offset) + this.valueLayout.getSpan(b, offset);\n  }\n\n}\n\nfunction map(keyLayout, valueLayout, property) {\n  const length = buffer_layout_1.u32('length');\n  const layout = buffer_layout_1.struct([length, buffer_layout_1.seq(new MapEntryLayout(keyLayout, valueLayout), buffer_layout_1.offset(length, -length.span), 'values')]);\n  return new WrappedLayout(layout, _ref5 => {\n    let {\n      values\n    } = _ref5;\n    return new Map(values);\n  }, values => ({\n    values: Array.from(values.entries())\n  }), property);\n}\n\nexports.map = map;","map":{"version":3,"sources":["../../src/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.map = exports.array = exports.rustEnum = exports.str = exports.vecU8 = exports.tagged = exports.vec = exports.bool = exports.option = exports.publicKey = exports.i128 = exports.u128 = exports.i64 = exports.u64 = exports.struct = exports.f64 = exports.f32 = exports.i32 = exports.u32 = exports.i16 = exports.u16 = exports.i8 = exports.u8 = void 0;\nconst buffer_layout_1 = require(\"buffer-layout\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nvar buffer_layout_2 = require(\"buffer-layout\");\nObject.defineProperty(exports, \"u8\", { enumerable: true, get: function () { return buffer_layout_2.u8; } });\nObject.defineProperty(exports, \"i8\", { enumerable: true, get: function () { return buffer_layout_2.s8; } });\nObject.defineProperty(exports, \"u16\", { enumerable: true, get: function () { return buffer_layout_2.u16; } });\nObject.defineProperty(exports, \"i16\", { enumerable: true, get: function () { return buffer_layout_2.s16; } });\nObject.defineProperty(exports, \"u32\", { enumerable: true, get: function () { return buffer_layout_2.u32; } });\nObject.defineProperty(exports, \"i32\", { enumerable: true, get: function () { return buffer_layout_2.s32; } });\nObject.defineProperty(exports, \"f32\", { enumerable: true, get: function () { return buffer_layout_2.f32; } });\nObject.defineProperty(exports, \"f64\", { enumerable: true, get: function () { return buffer_layout_2.f64; } });\nObject.defineProperty(exports, \"struct\", { enumerable: true, get: function () { return buffer_layout_2.struct; } });\nclass BNLayout extends buffer_layout_1.Layout {\n    constructor(span, signed, property) {\n        super(span, property);\n        this.blob = buffer_layout_1.blob(span);\n        this.signed = signed;\n    }\n    decode(b, offset = 0) {\n        const num = new bn_js_1.default(this.blob.decode(b, offset), 10, 'le');\n        if (this.signed) {\n            return num.fromTwos(this.span * 8).clone();\n        }\n        return num;\n    }\n    encode(src, b, offset = 0) {\n        if (this.signed) {\n            src = src.toTwos(this.span * 8);\n        }\n        return this.blob.encode(src.toArrayLike(Buffer, 'le', this.span), b, offset);\n    }\n}\nfunction u64(property) {\n    return new BNLayout(8, false, property);\n}\nexports.u64 = u64;\nfunction i64(property) {\n    return new BNLayout(8, true, property);\n}\nexports.i64 = i64;\nfunction u128(property) {\n    return new BNLayout(16, false, property);\n}\nexports.u128 = u128;\nfunction i128(property) {\n    return new BNLayout(16, true, property);\n}\nexports.i128 = i128;\nclass WrappedLayout extends buffer_layout_1.Layout {\n    constructor(layout, decoder, encoder, property) {\n        super(layout.span, property);\n        this.layout = layout;\n        this.decoder = decoder;\n        this.encoder = encoder;\n    }\n    decode(b, offset) {\n        return this.decoder(this.layout.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return this.layout.encode(this.encoder(src), b, offset);\n    }\n    getSpan(b, offset) {\n        return this.layout.getSpan(b, offset);\n    }\n}\nfunction publicKey(property) {\n    return new WrappedLayout(buffer_layout_1.blob(32), (b) => new web3_js_1.PublicKey(b), (key) => key.toBuffer(), property);\n}\nexports.publicKey = publicKey;\nclass OptionLayout extends buffer_layout_1.Layout {\n    constructor(layout, property) {\n        super(-1, property);\n        this.layout = layout;\n        this.discriminator = buffer_layout_1.u8();\n    }\n    encode(src, b, offset = 0) {\n        if (src === null || src === undefined) {\n            return this.discriminator.encode(0, b, offset);\n        }\n        this.discriminator.encode(1, b, offset);\n        return this.layout.encode(src, b, offset + 1) + 1;\n    }\n    decode(b, offset = 0) {\n        const discriminator = this.discriminator.decode(b, offset);\n        if (discriminator === 0) {\n            return null;\n        }\n        else if (discriminator === 1) {\n            return this.layout.decode(b, offset + 1);\n        }\n        throw new Error('Invalid option ' + this.property);\n    }\n    getSpan(b, offset = 0) {\n        const discriminator = this.discriminator.decode(b, offset);\n        if (discriminator === 0) {\n            return 1;\n        }\n        else if (discriminator === 1) {\n            return this.layout.getSpan(b, offset + 1) + 1;\n        }\n        throw new Error('Invalid option ' + this.property);\n    }\n}\nfunction option(layout, property) {\n    return new OptionLayout(layout, property);\n}\nexports.option = option;\nfunction bool(property) {\n    return new WrappedLayout(buffer_layout_1.u8(), decodeBool, encodeBool, property);\n}\nexports.bool = bool;\nfunction decodeBool(value) {\n    if (value === 0) {\n        return false;\n    }\n    else if (value === 1) {\n        return true;\n    }\n    throw new Error('Invalid bool: ' + value);\n}\nfunction encodeBool(value) {\n    return value ? 1 : 0;\n}\nfunction vec(elementLayout, property) {\n    const length = buffer_layout_1.u32('length');\n    const layout = buffer_layout_1.struct([\n        length,\n        buffer_layout_1.seq(elementLayout, buffer_layout_1.offset(length, -length.span), 'values'),\n    ]);\n    return new WrappedLayout(layout, ({ values }) => values, values => ({ values }), property);\n}\nexports.vec = vec;\nfunction tagged(tag, layout, property) {\n    const wrappedLayout = buffer_layout_1.struct([\n        u64('tag'),\n        layout.replicate('data'),\n    ]);\n    function decodeTag({ tag: receivedTag, data }) {\n        if (!receivedTag.eq(tag)) {\n            throw new Error('Invalid tag, expected: ' +\n                tag.toString('hex') +\n                ', got: ' +\n                receivedTag.toString('hex'));\n        }\n        return data;\n    }\n    return new WrappedLayout(wrappedLayout, decodeTag, data => ({ tag, data }), property);\n}\nexports.tagged = tagged;\nfunction vecU8(property) {\n    const length = buffer_layout_1.u32('length');\n    const layout = buffer_layout_1.struct([\n        length,\n        buffer_layout_1.blob(buffer_layout_1.offset(length, -length.span), 'data'),\n    ]);\n    return new WrappedLayout(layout, ({ data }) => data, data => ({ data }), property);\n}\nexports.vecU8 = vecU8;\nfunction str(property) {\n    return new WrappedLayout(vecU8(), data => data.toString('utf-8'), s => Buffer.from(s, 'utf-8'), property);\n}\nexports.str = str;\nfunction rustEnum(variants, property, discriminant) {\n    const unionLayout = buffer_layout_1.union(discriminant !== null && discriminant !== void 0 ? discriminant : buffer_layout_1.u8(), property);\n    variants.forEach((variant, index) => unionLayout.addVariant(index, variant, variant.property));\n    return unionLayout;\n}\nexports.rustEnum = rustEnum;\nfunction array(elementLayout, length, property) {\n    const layout = buffer_layout_1.struct([\n        buffer_layout_1.seq(elementLayout, length, 'values'),\n    ]);\n    return new WrappedLayout(layout, ({ values }) => values, values => ({ values }), property);\n}\nexports.array = array;\nclass MapEntryLayout extends buffer_layout_1.Layout {\n    constructor(keyLayout, valueLayout, property) {\n        super(keyLayout.span + valueLayout.span, property);\n        this.keyLayout = keyLayout;\n        this.valueLayout = valueLayout;\n    }\n    decode(b, offset) {\n        offset = offset || 0;\n        const key = this.keyLayout.decode(b, offset);\n        const value = this.valueLayout.decode(b, offset + this.keyLayout.getSpan(b, offset));\n        return [key, value];\n    }\n    encode(src, b, offset) {\n        offset = offset || 0;\n        const keyBytes = this.keyLayout.encode(src[0], b, offset);\n        const valueBytes = this.valueLayout.encode(src[1], b, offset + keyBytes);\n        return keyBytes + valueBytes;\n    }\n    getSpan(b, offset) {\n        return (this.keyLayout.getSpan(b, offset) + this.valueLayout.getSpan(b, offset));\n    }\n}\nfunction map(keyLayout, valueLayout, property) {\n    const length = buffer_layout_1.u32('length');\n    const layout = buffer_layout_1.struct([\n        length,\n        buffer_layout_1.seq(new MapEntryLayout(keyLayout, valueLayout), buffer_layout_1.offset(length, -length.span), 'values'),\n    ]);\n    return new WrappedLayout(layout, ({ values }) => new Map(values), values => ({ values: Array.from(values.entries()) }), property);\n}\nexports.map = map;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}