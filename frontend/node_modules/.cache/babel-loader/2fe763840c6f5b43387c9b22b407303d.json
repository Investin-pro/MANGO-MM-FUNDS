{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PerpEventQueueLayout = exports.PerpEventQueueHeaderLayout = exports.PerpEventLayout = exports.PerpMarketLayout = exports.liquidityMiningInfoLayout = exports.LiquidityMiningInfoLayout = exports.StubOracleLayout = exports.NodeBankLayout = exports.RootBankLayout = exports.MangoAccountLayout = exports.MangoGroupLayout = exports.perpAccountLayout = exports.PerpAccountLayout = exports.perpMarketInfoLayout = exports.PerpMarketInfoLayout = exports.PerpMarketInfo = exports.spotMarketInfoLayout = exports.SpotMarketInfoLayout = exports.SpotMarketInfo = exports.tokenInfoLayout = exports.TokenInfoLayout = exports.TokenInfo = exports.metaDataLayout = exports.MetaDataLayout = exports.MetaData = exports.DataType = exports.publicKeyLayout = exports.PublicKeyLayout = exports.encodeMangoInstruction = exports.MangoInstructionLayout = exports.advancedOrderTypeLayout = exports.triggerConditionLayout = exports.selfTradeBehaviorLayout = exports.orderTypeLayout = exports.sideLayout = exports.bool = exports.i128 = exports.u128 = exports.i64 = exports.u64 = exports.I80F48Layout = exports.CENTIBPS_PER_UNIT = exports.FREE_ORDER_SLOT = exports.MAX_PERP_OPEN_ORDERS = exports.MAX_NUM_IN_MARGIN_BASKET = exports.QUOTE_INDEX = exports.INFO_LEN = exports.MAX_NODE_BANKS = exports.MAX_PAIRS = exports.MAX_TOKENS = void 0;\nexports.ReferrerIdRecordLayout = exports.ReferrerIdRecord = exports.ReferrerMemoryLayout = exports.ReferrerMemory = exports.AdvancedOrdersLayout = exports.TokenAccountLayout = exports.NodeBank = exports.MangoCache = exports.MangoCacheLayout = exports.perpMarketCacheLayout = exports.PerpMarketCacheLayout = exports.PerpMarketCache = exports.rootBankCacheLayout = exports.RootBankCacheLayout = exports.RootBankCache = exports.priceCacheLayout = exports.PriceCacheLayout = exports.PriceCache = exports.BookSideLayout = void 0;\n\nconst buffer_layout_1 = require(\"buffer-layout\");\n\nconst web3_js_1 = require(\"@solana/web3.js\");\n\nconst fixednum_1 = require(\"./utils/fixednum\");\n\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\n\nconst utils_1 = require(\"./utils/utils\");\n\nconst PerpAccount_1 = __importDefault(require(\"./PerpAccount\"));\n\nexports.MAX_TOKENS = 16;\nexports.MAX_PAIRS = exports.MAX_TOKENS - 1;\nexports.MAX_NODE_BANKS = 8;\nexports.INFO_LEN = 32;\nexports.QUOTE_INDEX = exports.MAX_TOKENS - 1;\nexports.MAX_NUM_IN_MARGIN_BASKET = 9;\nexports.MAX_PERP_OPEN_ORDERS = 64;\nexports.FREE_ORDER_SLOT = 255; // u8::MAX\n\nexports.CENTIBPS_PER_UNIT = 1000000;\nconst MAX_BOOK_NODES = 1024;\n\nclass _I80F48Layout extends buffer_layout_1.Blob {\n  constructor(property) {\n    super(16, property);\n  }\n\n  decode(b, offset) {\n    let result = new bn_js_1.default(super.decode(b, offset), 10, 'le');\n    result = result.fromTwos(8 * this['length']);\n    return new fixednum_1.I80F48(result);\n  }\n\n  encode(src, b, offset) {\n    src = src.toTwos(8 * this['length']);\n    return super.encode(src.toArrayLike(Buffer, 'le', this['span']), b, offset);\n  }\n\n}\n/** @internal */\n\n\nfunction I80F48Layout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new _I80F48Layout(property);\n}\n\nexports.I80F48Layout = I80F48Layout;\n\nclass BNLayout extends buffer_layout_1.Blob {\n  constructor(number, property) {\n    let signed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    super(number, property);\n    this.signed = signed; // restore prototype chain\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n\n  decode(b, offset) {\n    let result = new bn_js_1.default(super.decode(b, offset), 10, 'le');\n    if (this.signed) result = result.fromTwos(8 * this['length']);\n    return result;\n  }\n\n  encode(src, b, offset) {\n    if (this.signed) src = src.toTwos(8 * this['length']);\n    return super.encode(src.toArrayLike(Buffer, 'le', this['span']), b, offset);\n  }\n\n}\n/** @internal */\n\n\nfunction u64() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new BNLayout(8, property);\n}\n\nexports.u64 = u64;\n/** @internal */\n\nfunction i64() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new BNLayout(8, property, true);\n}\n\nexports.i64 = i64;\n/** @internal */\n\nfunction u128(property) {\n  return new BNLayout(16, property);\n}\n\nexports.u128 = u128;\n/** @internal */\n\nfunction i128(property) {\n  return new BNLayout(16, property, true);\n}\n\nexports.i128 = i128;\n\nclass WrappedLayout extends buffer_layout_1.Layout {\n  constructor(layout, decoder, encoder, property) {\n    super(layout.span, property);\n    this.layout = layout;\n    this.decoder = decoder;\n    this.encoder = encoder;\n  }\n\n  decode(b, offset) {\n    return this.decoder(this.layout.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return this.layout.encode(this.encoder(src), b, offset);\n  }\n\n  getSpan(b, offset) {\n    return this.layout.getSpan(b, offset);\n  }\n\n}\n/** @internal */\n\n\nfunction bool(property) {\n  return new WrappedLayout(buffer_layout_1.u8(), decodeBool, encodeBool, property);\n}\n\nexports.bool = bool;\n\nfunction decodeBool(value) {\n  // TODO - use commented lines after deprecating devnet.2\n  return value !== 0; // if (value === 0) {\n  //   return false;\n  // } else if (value === 1) {\n  //   return true;\n  // }\n  // throw new Error('Invalid bool: ' + value);\n}\n\nfunction encodeBool(value) {\n  return value ? 1 : 0;\n}\n\nclass EnumLayout extends buffer_layout_1.UInt {\n  constructor(values, span, property) {\n    super(span, property);\n    this.values = values;\n  }\n\n  encode(src, b, offset) {\n    if (this.values[src] !== undefined) {\n      return super.encode(this.values[src], b, offset);\n    }\n\n    throw new Error('Invalid ' + this['property']);\n  }\n\n  decode(b, offset) {\n    const decodedValue = super.decode(b, offset);\n    const entry = Object.entries(this.values).find(_ref => {\n      let [, value] = _ref;\n      return value === decodedValue;\n    });\n\n    if (entry) {\n      return entry[0];\n    }\n\n    throw new Error('Invalid ' + this['property']);\n  }\n\n}\n/** @internal */\n\n\nfunction sideLayout(span, property) {\n  return new EnumLayout({\n    buy: 0,\n    sell: 1\n  }, span, property);\n}\n\nexports.sideLayout = sideLayout;\n/** @internal */\n\nfunction orderTypeLayout(property, span) {\n  return new EnumLayout({\n    limit: 0,\n    ioc: 1,\n    postOnly: 2,\n    market: 3,\n    postOnlySlide: 4\n  }, span, property);\n}\n\nexports.orderTypeLayout = orderTypeLayout;\n/** @internal */\n\nfunction selfTradeBehaviorLayout(property, span) {\n  return new EnumLayout({\n    decrementTake: 0,\n    cancelProvide: 1,\n    abortTransaction: 2\n  }, span, property);\n}\n\nexports.selfTradeBehaviorLayout = selfTradeBehaviorLayout;\n\nfunction triggerConditionLayout(property, span) {\n  return new EnumLayout({\n    above: 0,\n    below: 1\n  }, span, property);\n}\n\nexports.triggerConditionLayout = triggerConditionLayout;\n\nfunction advancedOrderTypeLayout(property, span) {\n  return new EnumLayout({\n    perpTrigger: 0,\n    spotTrigger: 1\n  }, span, property);\n}\n\nexports.advancedOrderTypeLayout = advancedOrderTypeLayout;\n/**\n * Makes custom modifications to the instruction layouts because valid instructions can be many sizes\n */\n\n/** @internal */\n\nclass MangoInstructionsUnion extends buffer_layout_1.Union {\n  constructor(discr, defaultLayout, property) {\n    super(discr, defaultLayout, property);\n  }\n\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n\n    const discr = this['discriminator'].decode(b, offset); // Adjust for old instructions that don't have optional bytes added to end\n\n    if (discr === 11 && b.length === 144 || discr === 12 && b.length === 30) {\n      b = Buffer.concat([b, Buffer.from([0])]);\n    } else if (discr === 37 && b.length === 141) {\n      b = Buffer.concat([b, Buffer.from([0, 0])]);\n    }\n\n    return super.decode(b, offset);\n  }\n\n  addVariant(variant, layout, property) {\n    return super.addVariant(variant, layout, property);\n  }\n\n}\n\nexports.MangoInstructionLayout = new MangoInstructionsUnion(buffer_layout_1.u32('instruction'));\nexports.MangoInstructionLayout.addVariant(0, buffer_layout_1.struct([u64('signerNonce'), u64('validInterval'), I80F48Layout('quoteOptimalUtil'), I80F48Layout('quoteOptimalRate'), I80F48Layout('quoteMaxRate')]), 'InitMangoGroup');\nexports.MangoInstructionLayout.addVariant(1, buffer_layout_1.struct([]), 'InitMangoAccount');\nexports.MangoInstructionLayout.addVariant(2, buffer_layout_1.struct([u64('quantity')]), 'Deposit');\nexports.MangoInstructionLayout.addVariant(3, buffer_layout_1.struct([u64('quantity'), buffer_layout_1.u8('allowBorrow')]), 'Withdraw');\nexports.MangoInstructionLayout.addVariant(4, buffer_layout_1.struct([I80F48Layout('maintLeverage'), I80F48Layout('initLeverage'), I80F48Layout('liquidationFee'), I80F48Layout('optimalUtil'), I80F48Layout('optimalRate'), I80F48Layout('maxRate')]), 'AddSpotMarket');\nexports.MangoInstructionLayout.addVariant(5, buffer_layout_1.struct([u64('marketIndex')]), 'AddToBasket');\nexports.MangoInstructionLayout.addVariant(6, buffer_layout_1.struct([u64('quantity')]), 'Borrow');\nexports.MangoInstructionLayout.addVariant(7, buffer_layout_1.struct([]), 'CachePrices');\nexports.MangoInstructionLayout.addVariant(8, buffer_layout_1.struct([]), 'CacheRootBanks');\nexports.MangoInstructionLayout.addVariant(9, buffer_layout_1.struct([sideLayout(4, 'side'), u64('limitPrice'), u64('maxBaseQuantity'), u64('maxQuoteQuantity'), selfTradeBehaviorLayout('selfTradeBehavior', 4), orderTypeLayout('orderType', 4), u64('clientId'), buffer_layout_1.u16('limit')]), 'PlaceSpotOrder');\nexports.MangoInstructionLayout.addVariant(10, buffer_layout_1.struct([]), 'AddOracle');\nexports.MangoInstructionLayout.addVariant(11, buffer_layout_1.struct([I80F48Layout('maintLeverage'), I80F48Layout('initLeverage'), I80F48Layout('liquidationFee'), I80F48Layout('makerFee'), I80F48Layout('takerFee'), i64('baseLotSize'), i64('quoteLotSize'), I80F48Layout('rate'), I80F48Layout('maxDepthBps'), u64('targetPeriodLength'), u64('mngoPerPeriod'), buffer_layout_1.u8('exp')]), 'AddPerpMarket');\nexports.MangoInstructionLayout.addVariant(12, buffer_layout_1.struct([i64('price'), i64('quantity'), u64('clientOrderId'), sideLayout(1, 'side'), orderTypeLayout('orderType', 1), bool('reduceOnly')]), 'PlacePerpOrder');\nexports.MangoInstructionLayout.addVariant(13, buffer_layout_1.struct([u64('clientOrderId'), bool('invalidIdOk')]), 'CancelPerpOrderByClientId');\nexports.MangoInstructionLayout.addVariant(14, buffer_layout_1.struct([i128('orderId'), bool('invalidIdOk')]), 'CancelPerpOrder');\nexports.MangoInstructionLayout.addVariant(15, buffer_layout_1.struct([u64('limit')]), 'ConsumeEvents');\nexports.MangoInstructionLayout.addVariant(16, buffer_layout_1.struct([]), 'CachePerpMarkets');\nexports.MangoInstructionLayout.addVariant(17, buffer_layout_1.struct([]), 'UpdateFunding');\nexports.MangoInstructionLayout.addVariant(18, buffer_layout_1.struct([I80F48Layout('price')]), 'SetOracle');\nexports.MangoInstructionLayout.addVariant(19, buffer_layout_1.struct([]), 'SettleFunds');\nexports.MangoInstructionLayout.addVariant(20, buffer_layout_1.struct([sideLayout(4, 'side'), u128('orderId')]), 'CancelSpotOrder');\nexports.MangoInstructionLayout.addVariant(21, buffer_layout_1.struct([]), 'UpdateRootBank');\nexports.MangoInstructionLayout.addVariant(22, buffer_layout_1.struct([u64('marketIndex')]), 'SettlePnl');\nexports.MangoInstructionLayout.addVariant(23, buffer_layout_1.struct([u64('tokenIndex'), u64('quantity')]), 'SettleBorrow');\nexports.MangoInstructionLayout.addVariant(24, buffer_layout_1.struct([buffer_layout_1.u8('limit')]), 'ForceCancelSpotOrders');\nexports.MangoInstructionLayout.addVariant(25, buffer_layout_1.struct([buffer_layout_1.u8('limit')]), 'ForceCancelPerpOrders');\nexports.MangoInstructionLayout.addVariant(26, buffer_layout_1.struct([I80F48Layout('maxLiabTransfer')]), 'LiquidateTokenAndToken');\nexports.MangoInstructionLayout.addVariant(27, buffer_layout_1.struct([buffer_layout_1.u8('assetType'), u64('assetIndex'), buffer_layout_1.u8('liabType'), u64('liabIndex'), I80F48Layout('maxLiabTransfer')]), 'LiquidateTokenAndPerp');\nexports.MangoInstructionLayout.addVariant(28, buffer_layout_1.struct([i64('baseTransferRequest')]), 'LiquidatePerpMarket');\nexports.MangoInstructionLayout.addVariant(29, buffer_layout_1.struct([]), 'SettleFees');\nexports.MangoInstructionLayout.addVariant(30, buffer_layout_1.struct([u64('liabIndex'), I80F48Layout('maxLiabTransfer')]), 'ResolvePerpBankruptcy');\nexports.MangoInstructionLayout.addVariant(31, buffer_layout_1.struct([I80F48Layout('maxLiabTransfer')]), 'ResolveTokenBankruptcy');\nexports.MangoInstructionLayout.addVariant(32, buffer_layout_1.struct([]), 'InitSpotOpenOrders');\nexports.MangoInstructionLayout.addVariant(33, buffer_layout_1.struct([]), 'RedeemMngo');\nexports.MangoInstructionLayout.addVariant(34, buffer_layout_1.struct([buffer_layout_1.seq(buffer_layout_1.u8(), exports.INFO_LEN, 'info')]), 'AddMangoAccountInfo');\nexports.MangoInstructionLayout.addVariant(35, buffer_layout_1.struct([u64('quantity')]), 'DepositMsrm');\nexports.MangoInstructionLayout.addVariant(36, buffer_layout_1.struct([u64('quantity')]), 'WithdrawMsrm');\nexports.MangoInstructionLayout.addVariant(37, buffer_layout_1.struct([bool('maintLeverageOption'), I80F48Layout('maintLeverage'), bool('initLeverageOption'), I80F48Layout('initLeverage'), bool('liquidationFeeOption'), I80F48Layout('liquidationFee'), bool('makerFeeOption'), I80F48Layout('makerFee'), bool('takerFeeOption'), I80F48Layout('takerFee'), bool('rateOption'), I80F48Layout('rate'), bool('maxDepthBpsOption'), I80F48Layout('maxDepthBps'), bool('targetPeriodLengthOption'), u64('targetPeriodLength'), bool('mngoPerPeriodOption'), u64('mngoPerPeriod'), bool('expOption'), buffer_layout_1.u8('exp')]), 'ChangePerpMarketParams');\nexports.MangoInstructionLayout.addVariant(38, buffer_layout_1.struct([]), 'SetGroupAdmin');\nexports.MangoInstructionLayout.addVariant(39, buffer_layout_1.struct([buffer_layout_1.u8('limit')]), 'CancelAllPerpOrders');\nexports.MangoInstructionLayout.addVariant(41, buffer_layout_1.struct([sideLayout(4, 'side'), u64('limitPrice'), u64('maxBaseQuantity'), u64('maxQuoteQuantity'), selfTradeBehaviorLayout('selfTradeBehavior', 4), orderTypeLayout('orderType', 4), u64('clientOrderId'), buffer_layout_1.u16('limit')]), 'PlaceSpotOrder2');\nexports.MangoInstructionLayout.addVariant(42, buffer_layout_1.struct([]), 'InitAdvancedOrders');\nexports.MangoInstructionLayout.addVariant(43, buffer_layout_1.struct([orderTypeLayout('orderType', 1), sideLayout(1, 'side'), triggerConditionLayout('triggerCondition', 1), bool('reduceOnly'), u64('clientOrderId'), i64('price'), i64('quantity'), I80F48Layout('triggerPrice')]), 'AddPerpTriggerOrder');\nexports.MangoInstructionLayout.addVariant(44, buffer_layout_1.struct([buffer_layout_1.u8('orderIndex')]), 'RemoveAdvancedOrder');\nexports.MangoInstructionLayout.addVariant(45, buffer_layout_1.struct([buffer_layout_1.u8('orderIndex')]), 'ExecutePerpTriggerOrder');\nexports.MangoInstructionLayout.addVariant(46, buffer_layout_1.struct([I80F48Layout('maintLeverage'), I80F48Layout('initLeverage'), I80F48Layout('liquidationFee'), I80F48Layout('makerFee'), I80F48Layout('takerFee'), i64('baseLotSize'), i64('quoteLotSize'), I80F48Layout('rate'), I80F48Layout('maxDepthBps'), u64('targetPeriodLength'), u64('mngoPerPeriod'), buffer_layout_1.u8('exp'), buffer_layout_1.u8('version'), buffer_layout_1.u8('lmSizeShift'), buffer_layout_1.u8('baseDecimals')]), 'CreatePerpMarket');\nexports.MangoInstructionLayout.addVariant(47, buffer_layout_1.struct([bool('maintLeverageOption'), I80F48Layout('maintLeverage'), bool('initLeverageOption'), I80F48Layout('initLeverage'), bool('liquidationFeeOption'), I80F48Layout('liquidationFee'), bool('makerFeeOption'), I80F48Layout('makerFee'), bool('takerFeeOption'), I80F48Layout('takerFee'), bool('rateOption'), I80F48Layout('rate'), bool('maxDepthBpsOption'), I80F48Layout('maxDepthBps'), bool('targetPeriodLengthOption'), u64('targetPeriodLength'), bool('mngoPerPeriodOption'), u64('mngoPerPeriod'), bool('expOption'), buffer_layout_1.u8('exp'), bool('versionOption'), buffer_layout_1.u8('version'), bool('lmSizeShiftOption'), buffer_layout_1.u8('lmSizeShift')]), 'ChangePerpMarketParams2');\nexports.MangoInstructionLayout.addVariant(48, buffer_layout_1.struct([]), 'UpdateMarginBasket');\nexports.MangoInstructionLayout.addVariant(49, buffer_layout_1.struct([buffer_layout_1.u32('maxMangoAccounts')]), 'ChangeMaxMangoAccounts');\nexports.MangoInstructionLayout.addVariant(50, buffer_layout_1.struct([]), 'CloseMangoAccount');\nexports.MangoInstructionLayout.addVariant(51, buffer_layout_1.struct([]), 'CloseSpotOpenOrders');\nexports.MangoInstructionLayout.addVariant(52, buffer_layout_1.struct([]), 'CloseAdvancedOrders');\nexports.MangoInstructionLayout.addVariant(53, buffer_layout_1.struct([]), 'CreateDustAccount');\nexports.MangoInstructionLayout.addVariant(54, buffer_layout_1.struct([]), 'ResolveDust');\nexports.MangoInstructionLayout.addVariant(55, buffer_layout_1.struct([u64('accountNum')]), 'CreateMangoAccount');\nexports.MangoInstructionLayout.addVariant(56, buffer_layout_1.struct([]), 'UpgradeMangoAccountV0V1');\nexports.MangoInstructionLayout.addVariant(57, buffer_layout_1.struct([sideLayout(1, 'side'), buffer_layout_1.u8('limit')]), 'CancelPerpOrdersSide');\nexports.MangoInstructionLayout.addVariant(58, buffer_layout_1.struct([]), 'SetDelegate');\nexports.MangoInstructionLayout.addVariant(59, buffer_layout_1.struct([bool('maintLeverageOption'), I80F48Layout('maintLeverage'), bool('initLeverageOption'), I80F48Layout('initLeverage'), bool('liquidationFeeOption'), I80F48Layout('liquidationFee'), bool('optimalUtilOption'), I80F48Layout('optimalUtil'), bool('optimalRateOption'), I80F48Layout('optimalRate'), bool('maxRateOption'), I80F48Layout('maxRate'), bool('versionOption'), buffer_layout_1.u8('version')]), 'ChangeSpotMarketParams');\nexports.MangoInstructionLayout.addVariant(60, buffer_layout_1.struct([]), 'CreateSpotOpenOrders');\nexports.MangoInstructionLayout.addVariant(61, buffer_layout_1.struct([buffer_layout_1.u32('refSurchargeCentibps'), buffer_layout_1.u32('refShareCentibps'), u64('refMngoRequired')]), 'ChangeReferralFeeParams');\nexports.MangoInstructionLayout.addVariant(62, buffer_layout_1.struct([]), 'SetReferrerMemory');\nexports.MangoInstructionLayout.addVariant(63, buffer_layout_1.struct([buffer_layout_1.seq(buffer_layout_1.u8(), exports.INFO_LEN, 'referrerId')]), 'RegisterReferrerId');\nexports.MangoInstructionLayout.addVariant(64, buffer_layout_1.struct([i64('price'), i64('maxBaseQuantity'), i64('maxQuoteQuantity'), u64('clientOrderId'), u64('expiryTimestamp'), sideLayout(1, 'side'), orderTypeLayout('orderType', 1), bool('reduceOnly'), buffer_layout_1.u8('limit')]), 'PlacePerpOrder2');\nconst instructionMaxSpan = Math.max( // @ts-ignore\n...Object.values(exports.MangoInstructionLayout.registry).map(r => r.span));\n/** @internal */\n\nfunction encodeMangoInstruction(data) {\n  const b = Buffer.alloc(instructionMaxSpan); // @ts-ignore\n\n  const span = exports.MangoInstructionLayout.encode(data, b);\n  return b.slice(0, span);\n}\n\nexports.encodeMangoInstruction = encodeMangoInstruction;\n/** @internal */\n\nclass PublicKeyLayout extends buffer_layout_1.Blob {\n  constructor(property) {\n    super(32, property);\n  }\n\n  decode(b, offset) {\n    return new web3_js_1.PublicKey(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.PublicKeyLayout = PublicKeyLayout;\n/** @internal */\n\nfunction publicKeyLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new PublicKeyLayout(property);\n}\n\nexports.publicKeyLayout = publicKeyLayout;\n/** @internal */\n\nexports.DataType = {\n  MangoGroup: 0,\n  MangoAccount: 1,\n  RootBank: 2,\n  NodeBank: 3,\n  PerpMarket: 4,\n  Bids: 5,\n  Asks: 6,\n  MangoCache: 7,\n  EventQueue: 8,\n  AdvancedOrders: 9,\n  ReferrerMemory: 10,\n  ReferrerIdRecord: 11\n};\n\nclass MetaData {\n  constructor(decoded) {\n    Object.assign(this, decoded);\n  }\n\n}\n\nexports.MetaData = MetaData;\n/** @internal */\n\nclass MetaDataLayout extends buffer_layout_1.Structure {\n  constructor(property) {\n    super([buffer_layout_1.u8('dataType'), buffer_layout_1.u8('version'), buffer_layout_1.u8('isInitialized'), buffer_layout_1.seq(buffer_layout_1.u8(), 5, 'extraInfo')], property);\n  }\n\n  decode(b, offset) {\n    return new MetaData(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.MetaDataLayout = MetaDataLayout;\n/** @internal */\n\nfunction metaDataLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new MetaDataLayout(property);\n}\n\nexports.metaDataLayout = metaDataLayout;\n/** @internal */\n\nclass TokenInfo {\n  constructor(decoded) {\n    Object.assign(this, decoded);\n  }\n\n  isEmpty() {\n    return this.mint.equals(utils_1.zeroKey);\n  }\n\n}\n\nexports.TokenInfo = TokenInfo;\n/** @internal */\n\nclass TokenInfoLayout extends buffer_layout_1.Structure {\n  constructor(property) {\n    super([publicKeyLayout('mint'), publicKeyLayout('rootBank'), buffer_layout_1.u8('decimals'), buffer_layout_1.seq(buffer_layout_1.u8(), 7, 'padding')], property);\n  }\n\n  decode(b, offset) {\n    return new TokenInfo(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.TokenInfoLayout = TokenInfoLayout;\n/** @internal */\n\nfunction tokenInfoLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new TokenInfoLayout(property);\n}\n\nexports.tokenInfoLayout = tokenInfoLayout;\n\nclass SpotMarketInfo {\n  constructor(decoded) {\n    Object.assign(this, decoded);\n  }\n\n  isEmpty() {\n    return this.spotMarket.equals(utils_1.zeroKey);\n  }\n\n}\n\nexports.SpotMarketInfo = SpotMarketInfo;\n/** @internal */\n\nclass SpotMarketInfoLayout extends buffer_layout_1.Structure {\n  constructor(property) {\n    super([publicKeyLayout('spotMarket'), I80F48Layout('maintAssetWeight'), I80F48Layout('initAssetWeight'), I80F48Layout('maintLiabWeight'), I80F48Layout('initLiabWeight'), I80F48Layout('liquidationFee')], property);\n  }\n\n  decode(b, offset) {\n    return new SpotMarketInfo(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.SpotMarketInfoLayout = SpotMarketInfoLayout;\n/** @internal */\n\nfunction spotMarketInfoLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new SpotMarketInfoLayout(property);\n}\n\nexports.spotMarketInfoLayout = spotMarketInfoLayout;\n\nclass PerpMarketInfo {\n  constructor(decoded) {\n    Object.assign(this, decoded);\n  }\n\n  isEmpty() {\n    return this.perpMarket.equals(utils_1.zeroKey);\n  }\n\n}\n\nexports.PerpMarketInfo = PerpMarketInfo;\n/** @internal */\n\nclass PerpMarketInfoLayout extends buffer_layout_1.Structure {\n  constructor(property) {\n    super([publicKeyLayout('perpMarket'), I80F48Layout('maintAssetWeight'), I80F48Layout('initAssetWeight'), I80F48Layout('maintLiabWeight'), I80F48Layout('initLiabWeight'), I80F48Layout('liquidationFee'), I80F48Layout('makerFee'), I80F48Layout('takerFee'), i64('baseLotSize'), i64('quoteLotSize')], property);\n  }\n\n  decode(b, offset) {\n    return new PerpMarketInfo(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.PerpMarketInfoLayout = PerpMarketInfoLayout;\n/** @internal */\n\nfunction perpMarketInfoLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new PerpMarketInfoLayout(property);\n}\n\nexports.perpMarketInfoLayout = perpMarketInfoLayout;\n/** @internal */\n\nclass PerpAccountLayout extends buffer_layout_1.Structure {\n  constructor(property) {\n    super([i64('basePosition'), I80F48Layout('quotePosition'), I80F48Layout('longSettledFunding'), I80F48Layout('shortSettledFunding'), i64('bidsQuantity'), i64('asksQuantity'), i64('takerBase'), i64('takerQuote'), u64('mngoAccrued')], property);\n  }\n\n  decode(b, offset) {\n    return new PerpAccount_1.default(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.PerpAccountLayout = PerpAccountLayout;\n/** @internal */\n\nfunction perpAccountLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new PerpAccountLayout(property);\n}\n\nexports.perpAccountLayout = perpAccountLayout;\n/** @internal */\n\nexports.MangoGroupLayout = buffer_layout_1.struct([metaDataLayout('metaData'), u64('numOracles'), buffer_layout_1.seq(tokenInfoLayout(), exports.MAX_TOKENS, 'tokens'), buffer_layout_1.seq(spotMarketInfoLayout(), exports.MAX_PAIRS, 'spotMarkets'), buffer_layout_1.seq(perpMarketInfoLayout(), exports.MAX_PAIRS, 'perpMarkets'), buffer_layout_1.seq(publicKeyLayout(), exports.MAX_PAIRS, 'oracles'), u64('signerNonce'), publicKeyLayout('signerKey'), publicKeyLayout('admin'), publicKeyLayout('dexProgramId'), publicKeyLayout('mangoCache'), u64('validInterval'), publicKeyLayout('insuranceVault'), publicKeyLayout('srmVault'), publicKeyLayout('msrmVault'), publicKeyLayout('feesVault'), buffer_layout_1.u32('maxMangoAccounts'), buffer_layout_1.u32('numMangoAccounts'), buffer_layout_1.u32('refSurchargeCentibps'), buffer_layout_1.u32('refShareCentibps'), u64('refMngoRequired'), buffer_layout_1.seq(buffer_layout_1.u8(), 8, 'padding')]);\n/** @internal */\n\nexports.MangoAccountLayout = buffer_layout_1.struct([metaDataLayout('metaData'), publicKeyLayout('mangoGroup'), publicKeyLayout('owner'), buffer_layout_1.seq(bool(), exports.MAX_PAIRS, 'inMarginBasket'), buffer_layout_1.u8('numInMarginBasket'), buffer_layout_1.seq(I80F48Layout(), exports.MAX_TOKENS, 'deposits'), buffer_layout_1.seq(I80F48Layout(), exports.MAX_TOKENS, 'borrows'), buffer_layout_1.seq(publicKeyLayout(), exports.MAX_PAIRS, 'spotOpenOrders'), buffer_layout_1.seq(perpAccountLayout(), exports.MAX_PAIRS, 'perpAccounts'), buffer_layout_1.seq(buffer_layout_1.u8(), exports.MAX_PERP_OPEN_ORDERS, 'orderMarket'), buffer_layout_1.seq(sideLayout(1), exports.MAX_PERP_OPEN_ORDERS, 'orderSide'), buffer_layout_1.seq(i128(), exports.MAX_PERP_OPEN_ORDERS, 'orders'), buffer_layout_1.seq(u64(), exports.MAX_PERP_OPEN_ORDERS, 'clientOrderIds'), u64('msrmAmount'), bool('beingLiquidated'), bool('isBankrupt'), buffer_layout_1.seq(buffer_layout_1.u8(), exports.INFO_LEN, 'info'), publicKeyLayout('advancedOrdersKey'), bool('notUpgradable'), publicKeyLayout('delegate'), buffer_layout_1.seq(buffer_layout_1.u8(), 5, 'padding')]);\n/** @internal */\n\nexports.RootBankLayout = buffer_layout_1.struct([metaDataLayout('metaData'), I80F48Layout('optimalUtil'), I80F48Layout('optimalRate'), I80F48Layout('maxRate'), u64('numNodeBanks'), buffer_layout_1.seq(publicKeyLayout(), exports.MAX_NODE_BANKS, 'nodeBanks'), I80F48Layout('depositIndex'), I80F48Layout('borrowIndex'), u64('lastUpdated'), buffer_layout_1.seq(buffer_layout_1.u8(), 64, 'padding')]);\n/** @internal */\n\nexports.NodeBankLayout = buffer_layout_1.struct([metaDataLayout('metaData'), I80F48Layout('deposits'), I80F48Layout('borrows'), publicKeyLayout('vault')]);\n/** @internal */\n\nexports.StubOracleLayout = buffer_layout_1.struct([buffer_layout_1.seq(buffer_layout_1.u8(), 8), I80F48Layout('price'), u64('lastUpdate')]);\n/** @internal */\n\nclass LiquidityMiningInfoLayout extends buffer_layout_1.Structure {\n  constructor(property) {\n    super([I80F48Layout('rate'), I80F48Layout('maxDepthBps'), u64('periodStart'), u64('targetPeriodLength'), u64('mngoLeft'), u64('mngoPerPeriod')], property);\n  }\n\n  decode(b, offset) {\n    return new MetaData(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.LiquidityMiningInfoLayout = LiquidityMiningInfoLayout;\n/** @internal */\n\nfunction liquidityMiningInfoLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new LiquidityMiningInfoLayout(property);\n}\n\nexports.liquidityMiningInfoLayout = liquidityMiningInfoLayout;\n/** @internal */\n\nexports.PerpMarketLayout = buffer_layout_1.struct([metaDataLayout('metaData'), publicKeyLayout('mangoGroup'), publicKeyLayout('bids'), publicKeyLayout('asks'), publicKeyLayout('eventQueue'), i64('quoteLotSize'), i64('baseLotSize'), I80F48Layout('longFunding'), I80F48Layout('shortFunding'), i64('openInterest'), u64('lastUpdated'), u64('seqNum'), I80F48Layout('feesAccrued'), liquidityMiningInfoLayout('liquidityMiningInfo'), publicKeyLayout('mngoVault')]);\nconst EVENT_SIZE = 200;\n/** @internal */\n\nexports.PerpEventLayout = buffer_layout_1.union(buffer_layout_1.u8('eventType'), buffer_layout_1.blob(EVENT_SIZE - 1), 'event');\nexports.PerpEventLayout.addVariant(0, buffer_layout_1.struct([sideLayout(1, 'takerSide'), buffer_layout_1.u8('makerSlot'), bool('makerOut'), buffer_layout_1.u8('version'), buffer_layout_1.seq(buffer_layout_1.u8(), 3), u64('timestamp'), u64('seqNum'), publicKeyLayout('maker'), i128('makerOrderId'), u64('makerClientOrderId'), I80F48Layout('makerFee'), i64('bestInitial'), u64('makerTimestamp'), publicKeyLayout('taker'), i128('takerOrderId'), u64('takerClientOrderId'), I80F48Layout('takerFee'), i64('price'), i64('quantity')]), 'fill');\nexports.PerpEventLayout.addVariant(1, buffer_layout_1.struct([sideLayout(1, 'side'), buffer_layout_1.u8('slot'), buffer_layout_1.seq(buffer_layout_1.u8(), 5), u64('timestamp'), u64('seqNum'), publicKeyLayout('owner'), i64('quantity'), buffer_layout_1.seq(buffer_layout_1.u8(), EVENT_SIZE - 64, 'padding')]), 'out');\nexports.PerpEventLayout.addVariant(2, buffer_layout_1.struct([buffer_layout_1.seq(buffer_layout_1.u8(), 7), u64('timestamp'), u64('seqNum'), publicKeyLayout('liqee'), publicKeyLayout('liqor'), I80F48Layout('price'), i64('quantity'), I80F48Layout('liquidationFee'), buffer_layout_1.seq(buffer_layout_1.u8(), EVENT_SIZE - 128, 'padding')]), 'liquidate');\n/** @internal */\n\nexports.PerpEventQueueHeaderLayout = buffer_layout_1.struct([metaDataLayout('metaData'), u64('head'), u64('count'), u64('seqNum')]);\n/** @internal */\n\nexports.PerpEventQueueLayout = buffer_layout_1.struct([metaDataLayout('metaData'), u64('head'), u64('count'), u64('seqNum'), buffer_layout_1.seq(exports.PerpEventLayout, buffer_layout_1.greedy(exports.PerpEventLayout.span), 'events')]);\nconst BOOK_NODE_SIZE = 88;\nconst BOOK_NODE_LAYOUT = buffer_layout_1.union(buffer_layout_1.u32('tag'), buffer_layout_1.blob(BOOK_NODE_SIZE - 4), 'node');\nBOOK_NODE_LAYOUT.addVariant(0, buffer_layout_1.struct([]), 'uninitialized');\nBOOK_NODE_LAYOUT.addVariant(1, buffer_layout_1.struct([// Only the first prefixLen high-order bits of key are meaningful\nbuffer_layout_1.u32('prefixLen'), u128('key'), buffer_layout_1.seq(buffer_layout_1.u32(), 2, 'children')]), 'innerNode');\nBOOK_NODE_LAYOUT.addVariant(2, buffer_layout_1.struct([buffer_layout_1.u8('ownerSlot'), orderTypeLayout('orderType', 1), buffer_layout_1.u8('version'), buffer_layout_1.u8('timeInForce'), u128('key'), publicKeyLayout('owner'), u64('quantity'), u64('clientOrderId'), u64('bestInitial'), u64('timestamp')]), 'leafNode');\nBOOK_NODE_LAYOUT.addVariant(3, buffer_layout_1.struct([buffer_layout_1.u32('next')]), 'freeNode');\nBOOK_NODE_LAYOUT.addVariant(4, buffer_layout_1.struct([]), 'lastFreeNode');\n/** @internal */\n\nexports.BookSideLayout = buffer_layout_1.struct([metaDataLayout('metaData'), buffer_layout_1.nu64('bumpIndex'), buffer_layout_1.nu64('freeListLen'), buffer_layout_1.u32('freeListHead'), buffer_layout_1.u32('rootNode'), buffer_layout_1.nu64('leafCount'), buffer_layout_1.seq(BOOK_NODE_LAYOUT, MAX_BOOK_NODES, 'nodes')]);\n\nclass PriceCache {\n  constructor(decoded) {\n    Object.assign(this, decoded);\n  }\n\n}\n\nexports.PriceCache = PriceCache;\n/** @internal */\n\nclass PriceCacheLayout extends buffer_layout_1.Structure {\n  constructor(property) {\n    super([I80F48Layout('price'), u64('lastUpdate')], property);\n  }\n\n  decode(b, offset) {\n    return new PriceCache(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.PriceCacheLayout = PriceCacheLayout;\n/** @internal */\n\nfunction priceCacheLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new PriceCacheLayout(property);\n}\n\nexports.priceCacheLayout = priceCacheLayout;\n\nclass RootBankCache {\n  constructor(decoded) {\n    Object.assign(this, decoded);\n  }\n\n}\n\nexports.RootBankCache = RootBankCache;\n/** @internal */\n\nclass RootBankCacheLayout extends buffer_layout_1.Structure {\n  constructor(property) {\n    super([I80F48Layout('depositIndex'), I80F48Layout('borrowIndex'), u64('lastUpdate')], property);\n  }\n\n  decode(b, offset) {\n    return new RootBankCache(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.RootBankCacheLayout = RootBankCacheLayout;\n/** @internal */\n\nfunction rootBankCacheLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new RootBankCacheLayout(property);\n}\n\nexports.rootBankCacheLayout = rootBankCacheLayout;\n\nclass PerpMarketCache {\n  constructor(decoded) {\n    Object.assign(this, decoded);\n  }\n\n}\n\nexports.PerpMarketCache = PerpMarketCache;\n/** @internal */\n\nclass PerpMarketCacheLayout extends buffer_layout_1.Structure {\n  constructor(property) {\n    super([I80F48Layout('longFunding'), I80F48Layout('shortFunding'), u64('lastUpdate')], property);\n  }\n\n  decode(b, offset) {\n    return new PerpMarketCache(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nexports.PerpMarketCacheLayout = PerpMarketCacheLayout;\n/** @internal */\n\nfunction perpMarketCacheLayout() {\n  let property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return new PerpMarketCacheLayout(property);\n}\n\nexports.perpMarketCacheLayout = perpMarketCacheLayout;\n/** @internal */\n\nexports.MangoCacheLayout = buffer_layout_1.struct([metaDataLayout('metaData'), buffer_layout_1.seq(priceCacheLayout(), exports.MAX_PAIRS, 'priceCache'), buffer_layout_1.seq(rootBankCacheLayout(), exports.MAX_TOKENS, 'rootBankCache'), buffer_layout_1.seq(perpMarketCacheLayout(), exports.MAX_PAIRS, 'perpMarketCache')]);\n\nclass MangoCache {\n  constructor(publicKey, decoded) {\n    this.publicKey = publicKey;\n    Object.assign(this, decoded);\n  }\n\n  getPrice(tokenIndex) {\n    return tokenIndex === exports.QUOTE_INDEX ? fixednum_1.ONE_I80F48 : this.priceCache[tokenIndex].price;\n  }\n\n}\n\nexports.MangoCache = MangoCache;\n\nclass NodeBank {\n  constructor(publicKey, decoded) {\n    this.publicKey = publicKey;\n    Object.assign(this, decoded);\n  }\n\n}\n\nexports.NodeBank = NodeBank;\n/** @internal */\n\nexports.TokenAccountLayout = buffer_layout_1.struct([publicKeyLayout('mint'), publicKeyLayout('owner'), buffer_layout_1.nu64('amount'), buffer_layout_1.blob(93)]);\nconst ADVANCED_ORDER_SIZE = 80;\nconst ADVANCED_ORDER_LAYOUT = buffer_layout_1.union(buffer_layout_1.u8('advancedOrderType'), buffer_layout_1.blob(ADVANCED_ORDER_SIZE - 1), 'advancedOrder');\nADVANCED_ORDER_LAYOUT.addVariant(0, buffer_layout_1.struct([bool('isActive'), buffer_layout_1.u8('marketIndex'), orderTypeLayout('orderType', 1), sideLayout(1, 'side'), triggerConditionLayout('triggerCondition', 1), bool('reduceOnly'), buffer_layout_1.seq(buffer_layout_1.u8(), 1, 'padding0'), u64('clientOrderId'), i64('price'), i64('quantity'), I80F48Layout('triggerPrice'), buffer_layout_1.seq(buffer_layout_1.u8(), 32, 'padding1')]), 'perpTrigger');\nconst MAX_ADVANCED_ORDERS = 32;\nexports.AdvancedOrdersLayout = buffer_layout_1.struct([metaDataLayout('metaData'), buffer_layout_1.seq(ADVANCED_ORDER_LAYOUT, MAX_ADVANCED_ORDERS, 'orders')]);\n/** @internal */\n\nclass ReferrerMemory {\n  constructor(decoded) {\n    Object.assign(this, decoded);\n  }\n\n}\n\nexports.ReferrerMemory = ReferrerMemory;\n/** @internal */\n\nexports.ReferrerMemoryLayout = buffer_layout_1.struct([metaDataLayout('metaData'), publicKeyLayout('referrerMangoAccount')]);\n/** @internal */\n\nclass ReferrerIdRecord {\n  constructor(decoded) {\n    Object.assign(this, decoded);\n  }\n\n  get referrerId() {\n    return this.id ? String.fromCharCode(...this.id).replace(new RegExp(String.fromCharCode(0), 'g'), '') : '';\n  }\n\n}\n\nexports.ReferrerIdRecord = ReferrerIdRecord;\n/** @internal */\n\nexports.ReferrerIdRecordLayout = buffer_layout_1.struct([metaDataLayout('metaData'), publicKeyLayout('referrerMangoAccount'), buffer_layout_1.seq(buffer_layout_1.u8(), exports.INFO_LEN, 'id')]);","map":{"version":3,"sources":["../../src/layout.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PerpEventQueueLayout = exports.PerpEventQueueHeaderLayout = exports.PerpEventLayout = exports.PerpMarketLayout = exports.liquidityMiningInfoLayout = exports.LiquidityMiningInfoLayout = exports.StubOracleLayout = exports.NodeBankLayout = exports.RootBankLayout = exports.MangoAccountLayout = exports.MangoGroupLayout = exports.perpAccountLayout = exports.PerpAccountLayout = exports.perpMarketInfoLayout = exports.PerpMarketInfoLayout = exports.PerpMarketInfo = exports.spotMarketInfoLayout = exports.SpotMarketInfoLayout = exports.SpotMarketInfo = exports.tokenInfoLayout = exports.TokenInfoLayout = exports.TokenInfo = exports.metaDataLayout = exports.MetaDataLayout = exports.MetaData = exports.DataType = exports.publicKeyLayout = exports.PublicKeyLayout = exports.encodeMangoInstruction = exports.MangoInstructionLayout = exports.advancedOrderTypeLayout = exports.triggerConditionLayout = exports.selfTradeBehaviorLayout = exports.orderTypeLayout = exports.sideLayout = exports.bool = exports.i128 = exports.u128 = exports.i64 = exports.u64 = exports.I80F48Layout = exports.CENTIBPS_PER_UNIT = exports.FREE_ORDER_SLOT = exports.MAX_PERP_OPEN_ORDERS = exports.MAX_NUM_IN_MARGIN_BASKET = exports.QUOTE_INDEX = exports.INFO_LEN = exports.MAX_NODE_BANKS = exports.MAX_PAIRS = exports.MAX_TOKENS = void 0;\nexports.ReferrerIdRecordLayout = exports.ReferrerIdRecord = exports.ReferrerMemoryLayout = exports.ReferrerMemory = exports.AdvancedOrdersLayout = exports.TokenAccountLayout = exports.NodeBank = exports.MangoCache = exports.MangoCacheLayout = exports.perpMarketCacheLayout = exports.PerpMarketCacheLayout = exports.PerpMarketCache = exports.rootBankCacheLayout = exports.RootBankCacheLayout = exports.RootBankCache = exports.priceCacheLayout = exports.PriceCacheLayout = exports.PriceCache = exports.BookSideLayout = void 0;\nconst buffer_layout_1 = require(\"buffer-layout\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst fixednum_1 = require(\"./utils/fixednum\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst utils_1 = require(\"./utils/utils\");\nconst PerpAccount_1 = __importDefault(require(\"./PerpAccount\"));\nexports.MAX_TOKENS = 16;\nexports.MAX_PAIRS = exports.MAX_TOKENS - 1;\nexports.MAX_NODE_BANKS = 8;\nexports.INFO_LEN = 32;\nexports.QUOTE_INDEX = exports.MAX_TOKENS - 1;\nexports.MAX_NUM_IN_MARGIN_BASKET = 9;\nexports.MAX_PERP_OPEN_ORDERS = 64;\nexports.FREE_ORDER_SLOT = 255; // u8::MAX\nexports.CENTIBPS_PER_UNIT = 1000000;\nconst MAX_BOOK_NODES = 1024;\nclass _I80F48Layout extends buffer_layout_1.Blob {\n    constructor(property) {\n        super(16, property);\n    }\n    decode(b, offset) {\n        let result = new bn_js_1.default(super.decode(b, offset), 10, 'le');\n        result = result.fromTwos(8 * this['length']);\n        return new fixednum_1.I80F48(result);\n    }\n    encode(src, b, offset) {\n        src = src.toTwos(8 * this['length']);\n        return super.encode(src.toArrayLike(Buffer, 'le', this['span']), b, offset);\n    }\n}\n/** @internal */\nfunction I80F48Layout(property = '') {\n    return new _I80F48Layout(property);\n}\nexports.I80F48Layout = I80F48Layout;\nclass BNLayout extends buffer_layout_1.Blob {\n    constructor(number, property, signed = false) {\n        super(number, property);\n        this.signed = signed;\n        // restore prototype chain\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n    decode(b, offset) {\n        let result = new bn_js_1.default(super.decode(b, offset), 10, 'le');\n        if (this.signed)\n            result = result.fromTwos(8 * this['length']);\n        return result;\n    }\n    encode(src, b, offset) {\n        if (this.signed)\n            src = src.toTwos(8 * this['length']);\n        return super.encode(src.toArrayLike(Buffer, 'le', this['span']), b, offset);\n    }\n}\n/** @internal */\nfunction u64(property = '') {\n    return new BNLayout(8, property);\n}\nexports.u64 = u64;\n/** @internal */\nfunction i64(property = '') {\n    return new BNLayout(8, property, true);\n}\nexports.i64 = i64;\n/** @internal */\nfunction u128(property) {\n    return new BNLayout(16, property);\n}\nexports.u128 = u128;\n/** @internal */\nfunction i128(property) {\n    return new BNLayout(16, property, true);\n}\nexports.i128 = i128;\nclass WrappedLayout extends buffer_layout_1.Layout {\n    constructor(layout, decoder, encoder, property) {\n        super(layout.span, property);\n        this.layout = layout;\n        this.decoder = decoder;\n        this.encoder = encoder;\n    }\n    decode(b, offset) {\n        return this.decoder(this.layout.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return this.layout.encode(this.encoder(src), b, offset);\n    }\n    getSpan(b, offset) {\n        return this.layout.getSpan(b, offset);\n    }\n}\n/** @internal */\nfunction bool(property) {\n    return new WrappedLayout(buffer_layout_1.u8(), decodeBool, encodeBool, property);\n}\nexports.bool = bool;\nfunction decodeBool(value) {\n    // TODO - use commented lines after deprecating devnet.2\n    return value !== 0;\n    // if (value === 0) {\n    //   return false;\n    // } else if (value === 1) {\n    //   return true;\n    // }\n    // throw new Error('Invalid bool: ' + value);\n}\nfunction encodeBool(value) {\n    return value ? 1 : 0;\n}\nclass EnumLayout extends buffer_layout_1.UInt {\n    constructor(values, span, property) {\n        super(span, property);\n        this.values = values;\n    }\n    encode(src, b, offset) {\n        if (this.values[src] !== undefined) {\n            return super.encode(this.values[src], b, offset);\n        }\n        throw new Error('Invalid ' + this['property']);\n    }\n    decode(b, offset) {\n        const decodedValue = super.decode(b, offset);\n        const entry = Object.entries(this.values).find(([, value]) => value === decodedValue);\n        if (entry) {\n            return entry[0];\n        }\n        throw new Error('Invalid ' + this['property']);\n    }\n}\n/** @internal */\nfunction sideLayout(span, property) {\n    return new EnumLayout({ buy: 0, sell: 1 }, span, property);\n}\nexports.sideLayout = sideLayout;\n/** @internal */\nfunction orderTypeLayout(property, span) {\n    return new EnumLayout({ limit: 0, ioc: 1, postOnly: 2, market: 3, postOnlySlide: 4 }, span, property);\n}\nexports.orderTypeLayout = orderTypeLayout;\n/** @internal */\nfunction selfTradeBehaviorLayout(property, span) {\n    return new EnumLayout({ decrementTake: 0, cancelProvide: 1, abortTransaction: 2 }, span, property);\n}\nexports.selfTradeBehaviorLayout = selfTradeBehaviorLayout;\nfunction triggerConditionLayout(property, span) {\n    return new EnumLayout({ above: 0, below: 1 }, span, property);\n}\nexports.triggerConditionLayout = triggerConditionLayout;\nfunction advancedOrderTypeLayout(property, span) {\n    return new EnumLayout({ perpTrigger: 0, spotTrigger: 1 }, span, property);\n}\nexports.advancedOrderTypeLayout = advancedOrderTypeLayout;\n/**\n * Makes custom modifications to the instruction layouts because valid instructions can be many sizes\n */\n/** @internal */\nclass MangoInstructionsUnion extends buffer_layout_1.Union {\n    constructor(discr, defaultLayout, property) {\n        super(discr, defaultLayout, property);\n    }\n    decode(b, offset) {\n        if (undefined === offset) {\n            offset = 0;\n        }\n        const discr = this['discriminator'].decode(b, offset);\n        // Adjust for old instructions that don't have optional bytes added to end\n        if ((discr === 11 && b.length === 144) ||\n            (discr === 12 && b.length === 30)) {\n            b = Buffer.concat([b, Buffer.from([0])]);\n        }\n        else if (discr === 37 && b.length === 141) {\n            b = Buffer.concat([b, Buffer.from([0, 0])]);\n        }\n        return super.decode(b, offset);\n    }\n    addVariant(variant, layout, property) {\n        return super.addVariant(variant, layout, property);\n    }\n}\nexports.MangoInstructionLayout = new MangoInstructionsUnion(buffer_layout_1.u32('instruction'));\nexports.MangoInstructionLayout.addVariant(0, buffer_layout_1.struct([\n    u64('signerNonce'),\n    u64('validInterval'),\n    I80F48Layout('quoteOptimalUtil'),\n    I80F48Layout('quoteOptimalRate'),\n    I80F48Layout('quoteMaxRate'),\n]), 'InitMangoGroup');\nexports.MangoInstructionLayout.addVariant(1, buffer_layout_1.struct([]), 'InitMangoAccount');\nexports.MangoInstructionLayout.addVariant(2, buffer_layout_1.struct([u64('quantity')]), 'Deposit');\nexports.MangoInstructionLayout.addVariant(3, buffer_layout_1.struct([u64('quantity'), buffer_layout_1.u8('allowBorrow')]), 'Withdraw');\nexports.MangoInstructionLayout.addVariant(4, buffer_layout_1.struct([\n    I80F48Layout('maintLeverage'),\n    I80F48Layout('initLeverage'),\n    I80F48Layout('liquidationFee'),\n    I80F48Layout('optimalUtil'),\n    I80F48Layout('optimalRate'),\n    I80F48Layout('maxRate'),\n]), 'AddSpotMarket');\nexports.MangoInstructionLayout.addVariant(5, buffer_layout_1.struct([u64('marketIndex')]), 'AddToBasket');\nexports.MangoInstructionLayout.addVariant(6, buffer_layout_1.struct([u64('quantity')]), 'Borrow');\nexports.MangoInstructionLayout.addVariant(7, buffer_layout_1.struct([]), 'CachePrices');\nexports.MangoInstructionLayout.addVariant(8, buffer_layout_1.struct([]), 'CacheRootBanks');\nexports.MangoInstructionLayout.addVariant(9, buffer_layout_1.struct([\n    sideLayout(4, 'side'),\n    u64('limitPrice'),\n    u64('maxBaseQuantity'),\n    u64('maxQuoteQuantity'),\n    selfTradeBehaviorLayout('selfTradeBehavior', 4),\n    orderTypeLayout('orderType', 4),\n    u64('clientId'),\n    buffer_layout_1.u16('limit'),\n]), 'PlaceSpotOrder');\nexports.MangoInstructionLayout.addVariant(10, buffer_layout_1.struct([]), 'AddOracle');\nexports.MangoInstructionLayout.addVariant(11, buffer_layout_1.struct([\n    I80F48Layout('maintLeverage'),\n    I80F48Layout('initLeverage'),\n    I80F48Layout('liquidationFee'),\n    I80F48Layout('makerFee'),\n    I80F48Layout('takerFee'),\n    i64('baseLotSize'),\n    i64('quoteLotSize'),\n    I80F48Layout('rate'),\n    I80F48Layout('maxDepthBps'),\n    u64('targetPeriodLength'),\n    u64('mngoPerPeriod'),\n    buffer_layout_1.u8('exp'),\n]), 'AddPerpMarket');\nexports.MangoInstructionLayout.addVariant(12, buffer_layout_1.struct([\n    i64('price'),\n    i64('quantity'),\n    u64('clientOrderId'),\n    sideLayout(1, 'side'),\n    orderTypeLayout('orderType', 1),\n    bool('reduceOnly'),\n]), 'PlacePerpOrder');\nexports.MangoInstructionLayout.addVariant(13, buffer_layout_1.struct([u64('clientOrderId'), bool('invalidIdOk')]), 'CancelPerpOrderByClientId');\nexports.MangoInstructionLayout.addVariant(14, buffer_layout_1.struct([i128('orderId'), bool('invalidIdOk')]), 'CancelPerpOrder');\nexports.MangoInstructionLayout.addVariant(15, buffer_layout_1.struct([u64('limit')]), 'ConsumeEvents');\nexports.MangoInstructionLayout.addVariant(16, buffer_layout_1.struct([]), 'CachePerpMarkets');\nexports.MangoInstructionLayout.addVariant(17, buffer_layout_1.struct([]), 'UpdateFunding');\nexports.MangoInstructionLayout.addVariant(18, buffer_layout_1.struct([I80F48Layout('price')]), 'SetOracle');\nexports.MangoInstructionLayout.addVariant(19, buffer_layout_1.struct([]), 'SettleFunds');\nexports.MangoInstructionLayout.addVariant(20, buffer_layout_1.struct([sideLayout(4, 'side'), u128('orderId')]), 'CancelSpotOrder');\nexports.MangoInstructionLayout.addVariant(21, buffer_layout_1.struct([]), 'UpdateRootBank');\nexports.MangoInstructionLayout.addVariant(22, buffer_layout_1.struct([u64('marketIndex')]), 'SettlePnl');\nexports.MangoInstructionLayout.addVariant(23, buffer_layout_1.struct([u64('tokenIndex'), u64('quantity')]), 'SettleBorrow');\nexports.MangoInstructionLayout.addVariant(24, buffer_layout_1.struct([buffer_layout_1.u8('limit')]), 'ForceCancelSpotOrders');\nexports.MangoInstructionLayout.addVariant(25, buffer_layout_1.struct([buffer_layout_1.u8('limit')]), 'ForceCancelPerpOrders');\nexports.MangoInstructionLayout.addVariant(26, buffer_layout_1.struct([I80F48Layout('maxLiabTransfer')]), 'LiquidateTokenAndToken');\nexports.MangoInstructionLayout.addVariant(27, buffer_layout_1.struct([\n    buffer_layout_1.u8('assetType'),\n    u64('assetIndex'),\n    buffer_layout_1.u8('liabType'),\n    u64('liabIndex'),\n    I80F48Layout('maxLiabTransfer'),\n]), 'LiquidateTokenAndPerp');\nexports.MangoInstructionLayout.addVariant(28, buffer_layout_1.struct([i64('baseTransferRequest')]), 'LiquidatePerpMarket');\nexports.MangoInstructionLayout.addVariant(29, buffer_layout_1.struct([]), 'SettleFees');\nexports.MangoInstructionLayout.addVariant(30, buffer_layout_1.struct([u64('liabIndex'), I80F48Layout('maxLiabTransfer')]), 'ResolvePerpBankruptcy');\nexports.MangoInstructionLayout.addVariant(31, buffer_layout_1.struct([I80F48Layout('maxLiabTransfer')]), 'ResolveTokenBankruptcy');\nexports.MangoInstructionLayout.addVariant(32, buffer_layout_1.struct([]), 'InitSpotOpenOrders');\nexports.MangoInstructionLayout.addVariant(33, buffer_layout_1.struct([]), 'RedeemMngo');\nexports.MangoInstructionLayout.addVariant(34, buffer_layout_1.struct([buffer_layout_1.seq(buffer_layout_1.u8(), exports.INFO_LEN, 'info')]), 'AddMangoAccountInfo');\nexports.MangoInstructionLayout.addVariant(35, buffer_layout_1.struct([u64('quantity')]), 'DepositMsrm');\nexports.MangoInstructionLayout.addVariant(36, buffer_layout_1.struct([u64('quantity')]), 'WithdrawMsrm');\nexports.MangoInstructionLayout.addVariant(37, buffer_layout_1.struct([\n    bool('maintLeverageOption'),\n    I80F48Layout('maintLeverage'),\n    bool('initLeverageOption'),\n    I80F48Layout('initLeverage'),\n    bool('liquidationFeeOption'),\n    I80F48Layout('liquidationFee'),\n    bool('makerFeeOption'),\n    I80F48Layout('makerFee'),\n    bool('takerFeeOption'),\n    I80F48Layout('takerFee'),\n    bool('rateOption'),\n    I80F48Layout('rate'),\n    bool('maxDepthBpsOption'),\n    I80F48Layout('maxDepthBps'),\n    bool('targetPeriodLengthOption'),\n    u64('targetPeriodLength'),\n    bool('mngoPerPeriodOption'),\n    u64('mngoPerPeriod'),\n    bool('expOption'),\n    buffer_layout_1.u8('exp'),\n]), 'ChangePerpMarketParams');\nexports.MangoInstructionLayout.addVariant(38, buffer_layout_1.struct([]), 'SetGroupAdmin');\nexports.MangoInstructionLayout.addVariant(39, buffer_layout_1.struct([buffer_layout_1.u8('limit')]), 'CancelAllPerpOrders');\nexports.MangoInstructionLayout.addVariant(41, buffer_layout_1.struct([\n    sideLayout(4, 'side'),\n    u64('limitPrice'),\n    u64('maxBaseQuantity'),\n    u64('maxQuoteQuantity'),\n    selfTradeBehaviorLayout('selfTradeBehavior', 4),\n    orderTypeLayout('orderType', 4),\n    u64('clientOrderId'),\n    buffer_layout_1.u16('limit'),\n]), 'PlaceSpotOrder2');\nexports.MangoInstructionLayout.addVariant(42, buffer_layout_1.struct([]), 'InitAdvancedOrders');\nexports.MangoInstructionLayout.addVariant(43, buffer_layout_1.struct([\n    orderTypeLayout('orderType', 1),\n    sideLayout(1, 'side'),\n    triggerConditionLayout('triggerCondition', 1),\n    bool('reduceOnly'),\n    u64('clientOrderId'),\n    i64('price'),\n    i64('quantity'),\n    I80F48Layout('triggerPrice'),\n]), 'AddPerpTriggerOrder');\nexports.MangoInstructionLayout.addVariant(44, buffer_layout_1.struct([buffer_layout_1.u8('orderIndex')]), 'RemoveAdvancedOrder');\nexports.MangoInstructionLayout.addVariant(45, buffer_layout_1.struct([buffer_layout_1.u8('orderIndex')]), 'ExecutePerpTriggerOrder');\nexports.MangoInstructionLayout.addVariant(46, buffer_layout_1.struct([\n    I80F48Layout('maintLeverage'),\n    I80F48Layout('initLeverage'),\n    I80F48Layout('liquidationFee'),\n    I80F48Layout('makerFee'),\n    I80F48Layout('takerFee'),\n    i64('baseLotSize'),\n    i64('quoteLotSize'),\n    I80F48Layout('rate'),\n    I80F48Layout('maxDepthBps'),\n    u64('targetPeriodLength'),\n    u64('mngoPerPeriod'),\n    buffer_layout_1.u8('exp'),\n    buffer_layout_1.u8('version'),\n    buffer_layout_1.u8('lmSizeShift'),\n    buffer_layout_1.u8('baseDecimals'),\n]), 'CreatePerpMarket');\nexports.MangoInstructionLayout.addVariant(47, buffer_layout_1.struct([\n    bool('maintLeverageOption'),\n    I80F48Layout('maintLeverage'),\n    bool('initLeverageOption'),\n    I80F48Layout('initLeverage'),\n    bool('liquidationFeeOption'),\n    I80F48Layout('liquidationFee'),\n    bool('makerFeeOption'),\n    I80F48Layout('makerFee'),\n    bool('takerFeeOption'),\n    I80F48Layout('takerFee'),\n    bool('rateOption'),\n    I80F48Layout('rate'),\n    bool('maxDepthBpsOption'),\n    I80F48Layout('maxDepthBps'),\n    bool('targetPeriodLengthOption'),\n    u64('targetPeriodLength'),\n    bool('mngoPerPeriodOption'),\n    u64('mngoPerPeriod'),\n    bool('expOption'),\n    buffer_layout_1.u8('exp'),\n    bool('versionOption'),\n    buffer_layout_1.u8('version'),\n    bool('lmSizeShiftOption'),\n    buffer_layout_1.u8('lmSizeShift'),\n]), 'ChangePerpMarketParams2');\nexports.MangoInstructionLayout.addVariant(48, buffer_layout_1.struct([]), 'UpdateMarginBasket');\nexports.MangoInstructionLayout.addVariant(49, buffer_layout_1.struct([buffer_layout_1.u32('maxMangoAccounts')]), 'ChangeMaxMangoAccounts');\nexports.MangoInstructionLayout.addVariant(50, buffer_layout_1.struct([]), 'CloseMangoAccount');\nexports.MangoInstructionLayout.addVariant(51, buffer_layout_1.struct([]), 'CloseSpotOpenOrders');\nexports.MangoInstructionLayout.addVariant(52, buffer_layout_1.struct([]), 'CloseAdvancedOrders');\nexports.MangoInstructionLayout.addVariant(53, buffer_layout_1.struct([]), 'CreateDustAccount');\nexports.MangoInstructionLayout.addVariant(54, buffer_layout_1.struct([]), 'ResolveDust');\nexports.MangoInstructionLayout.addVariant(55, buffer_layout_1.struct([u64('accountNum')]), 'CreateMangoAccount');\nexports.MangoInstructionLayout.addVariant(56, buffer_layout_1.struct([]), 'UpgradeMangoAccountV0V1');\nexports.MangoInstructionLayout.addVariant(57, buffer_layout_1.struct([sideLayout(1, 'side'), buffer_layout_1.u8('limit')]), 'CancelPerpOrdersSide');\nexports.MangoInstructionLayout.addVariant(58, buffer_layout_1.struct([]), 'SetDelegate');\nexports.MangoInstructionLayout.addVariant(59, buffer_layout_1.struct([\n    bool('maintLeverageOption'),\n    I80F48Layout('maintLeverage'),\n    bool('initLeverageOption'),\n    I80F48Layout('initLeverage'),\n    bool('liquidationFeeOption'),\n    I80F48Layout('liquidationFee'),\n    bool('optimalUtilOption'),\n    I80F48Layout('optimalUtil'),\n    bool('optimalRateOption'),\n    I80F48Layout('optimalRate'),\n    bool('maxRateOption'),\n    I80F48Layout('maxRate'),\n    bool('versionOption'),\n    buffer_layout_1.u8('version'),\n]), 'ChangeSpotMarketParams');\nexports.MangoInstructionLayout.addVariant(60, buffer_layout_1.struct([]), 'CreateSpotOpenOrders');\nexports.MangoInstructionLayout.addVariant(61, buffer_layout_1.struct([\n    buffer_layout_1.u32('refSurchargeCentibps'),\n    buffer_layout_1.u32('refShareCentibps'),\n    u64('refMngoRequired'),\n]), 'ChangeReferralFeeParams');\nexports.MangoInstructionLayout.addVariant(62, buffer_layout_1.struct([]), 'SetReferrerMemory');\nexports.MangoInstructionLayout.addVariant(63, buffer_layout_1.struct([buffer_layout_1.seq(buffer_layout_1.u8(), exports.INFO_LEN, 'referrerId')]), 'RegisterReferrerId');\nexports.MangoInstructionLayout.addVariant(64, buffer_layout_1.struct([\n    i64('price'),\n    i64('maxBaseQuantity'),\n    i64('maxQuoteQuantity'),\n    u64('clientOrderId'),\n    u64('expiryTimestamp'),\n    sideLayout(1, 'side'),\n    orderTypeLayout('orderType', 1),\n    bool('reduceOnly'),\n    buffer_layout_1.u8('limit'),\n]), 'PlacePerpOrder2');\nconst instructionMaxSpan = Math.max(\n// @ts-ignore\n...Object.values(exports.MangoInstructionLayout.registry).map((r) => r.span));\n/** @internal */\nfunction encodeMangoInstruction(data) {\n    const b = Buffer.alloc(instructionMaxSpan);\n    // @ts-ignore\n    const span = exports.MangoInstructionLayout.encode(data, b);\n    return b.slice(0, span);\n}\nexports.encodeMangoInstruction = encodeMangoInstruction;\n/** @internal */\nclass PublicKeyLayout extends buffer_layout_1.Blob {\n    constructor(property) {\n        super(32, property);\n    }\n    decode(b, offset) {\n        return new web3_js_1.PublicKey(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.PublicKeyLayout = PublicKeyLayout;\n/** @internal */\nfunction publicKeyLayout(property = '') {\n    return new PublicKeyLayout(property);\n}\nexports.publicKeyLayout = publicKeyLayout;\n/** @internal */\nexports.DataType = {\n    MangoGroup: 0,\n    MangoAccount: 1,\n    RootBank: 2,\n    NodeBank: 3,\n    PerpMarket: 4,\n    Bids: 5,\n    Asks: 6,\n    MangoCache: 7,\n    EventQueue: 8,\n    AdvancedOrders: 9,\n    ReferrerMemory: 10,\n    ReferrerIdRecord: 11,\n};\nclass MetaData {\n    constructor(decoded) {\n        Object.assign(this, decoded);\n    }\n}\nexports.MetaData = MetaData;\n/** @internal */\nclass MetaDataLayout extends buffer_layout_1.Structure {\n    constructor(property) {\n        super([\n            buffer_layout_1.u8('dataType'),\n            buffer_layout_1.u8('version'),\n            buffer_layout_1.u8('isInitialized'),\n            buffer_layout_1.seq(buffer_layout_1.u8(), 5, 'extraInfo'),\n        ], property);\n    }\n    decode(b, offset) {\n        return new MetaData(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.MetaDataLayout = MetaDataLayout;\n/** @internal */\nfunction metaDataLayout(property = '') {\n    return new MetaDataLayout(property);\n}\nexports.metaDataLayout = metaDataLayout;\n/** @internal */\nclass TokenInfo {\n    constructor(decoded) {\n        Object.assign(this, decoded);\n    }\n    isEmpty() {\n        return this.mint.equals(utils_1.zeroKey);\n    }\n}\nexports.TokenInfo = TokenInfo;\n/** @internal */\nclass TokenInfoLayout extends buffer_layout_1.Structure {\n    constructor(property) {\n        super([\n            publicKeyLayout('mint'),\n            publicKeyLayout('rootBank'),\n            buffer_layout_1.u8('decimals'),\n            buffer_layout_1.seq(buffer_layout_1.u8(), 7, 'padding'),\n        ], property);\n    }\n    decode(b, offset) {\n        return new TokenInfo(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.TokenInfoLayout = TokenInfoLayout;\n/** @internal */\nfunction tokenInfoLayout(property = '') {\n    return new TokenInfoLayout(property);\n}\nexports.tokenInfoLayout = tokenInfoLayout;\nclass SpotMarketInfo {\n    constructor(decoded) {\n        Object.assign(this, decoded);\n    }\n    isEmpty() {\n        return this.spotMarket.equals(utils_1.zeroKey);\n    }\n}\nexports.SpotMarketInfo = SpotMarketInfo;\n/** @internal */\nclass SpotMarketInfoLayout extends buffer_layout_1.Structure {\n    constructor(property) {\n        super([\n            publicKeyLayout('spotMarket'),\n            I80F48Layout('maintAssetWeight'),\n            I80F48Layout('initAssetWeight'),\n            I80F48Layout('maintLiabWeight'),\n            I80F48Layout('initLiabWeight'),\n            I80F48Layout('liquidationFee'),\n        ], property);\n    }\n    decode(b, offset) {\n        return new SpotMarketInfo(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.SpotMarketInfoLayout = SpotMarketInfoLayout;\n/** @internal */\nfunction spotMarketInfoLayout(property = '') {\n    return new SpotMarketInfoLayout(property);\n}\nexports.spotMarketInfoLayout = spotMarketInfoLayout;\nclass PerpMarketInfo {\n    constructor(decoded) {\n        Object.assign(this, decoded);\n    }\n    isEmpty() {\n        return this.perpMarket.equals(utils_1.zeroKey);\n    }\n}\nexports.PerpMarketInfo = PerpMarketInfo;\n/** @internal */\nclass PerpMarketInfoLayout extends buffer_layout_1.Structure {\n    constructor(property) {\n        super([\n            publicKeyLayout('perpMarket'),\n            I80F48Layout('maintAssetWeight'),\n            I80F48Layout('initAssetWeight'),\n            I80F48Layout('maintLiabWeight'),\n            I80F48Layout('initLiabWeight'),\n            I80F48Layout('liquidationFee'),\n            I80F48Layout('makerFee'),\n            I80F48Layout('takerFee'),\n            i64('baseLotSize'),\n            i64('quoteLotSize'),\n        ], property);\n    }\n    decode(b, offset) {\n        return new PerpMarketInfo(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.PerpMarketInfoLayout = PerpMarketInfoLayout;\n/** @internal */\nfunction perpMarketInfoLayout(property = '') {\n    return new PerpMarketInfoLayout(property);\n}\nexports.perpMarketInfoLayout = perpMarketInfoLayout;\n/** @internal */\nclass PerpAccountLayout extends buffer_layout_1.Structure {\n    constructor(property) {\n        super([\n            i64('basePosition'),\n            I80F48Layout('quotePosition'),\n            I80F48Layout('longSettledFunding'),\n            I80F48Layout('shortSettledFunding'),\n            i64('bidsQuantity'),\n            i64('asksQuantity'),\n            i64('takerBase'),\n            i64('takerQuote'),\n            u64('mngoAccrued'),\n        ], property);\n    }\n    decode(b, offset) {\n        return new PerpAccount_1.default(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.PerpAccountLayout = PerpAccountLayout;\n/** @internal */\nfunction perpAccountLayout(property = '') {\n    return new PerpAccountLayout(property);\n}\nexports.perpAccountLayout = perpAccountLayout;\n/** @internal */\nexports.MangoGroupLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    u64('numOracles'),\n    buffer_layout_1.seq(tokenInfoLayout(), exports.MAX_TOKENS, 'tokens'),\n    buffer_layout_1.seq(spotMarketInfoLayout(), exports.MAX_PAIRS, 'spotMarkets'),\n    buffer_layout_1.seq(perpMarketInfoLayout(), exports.MAX_PAIRS, 'perpMarkets'),\n    buffer_layout_1.seq(publicKeyLayout(), exports.MAX_PAIRS, 'oracles'),\n    u64('signerNonce'),\n    publicKeyLayout('signerKey'),\n    publicKeyLayout('admin'),\n    publicKeyLayout('dexProgramId'),\n    publicKeyLayout('mangoCache'),\n    u64('validInterval'),\n    publicKeyLayout('insuranceVault'),\n    publicKeyLayout('srmVault'),\n    publicKeyLayout('msrmVault'),\n    publicKeyLayout('feesVault'),\n    buffer_layout_1.u32('maxMangoAccounts'),\n    buffer_layout_1.u32('numMangoAccounts'),\n    buffer_layout_1.u32('refSurchargeCentibps'),\n    buffer_layout_1.u32('refShareCentibps'),\n    u64('refMngoRequired'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), 8, 'padding'),\n]);\n/** @internal */\nexports.MangoAccountLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    publicKeyLayout('mangoGroup'),\n    publicKeyLayout('owner'),\n    buffer_layout_1.seq(bool(), exports.MAX_PAIRS, 'inMarginBasket'),\n    buffer_layout_1.u8('numInMarginBasket'),\n    buffer_layout_1.seq(I80F48Layout(), exports.MAX_TOKENS, 'deposits'),\n    buffer_layout_1.seq(I80F48Layout(), exports.MAX_TOKENS, 'borrows'),\n    buffer_layout_1.seq(publicKeyLayout(), exports.MAX_PAIRS, 'spotOpenOrders'),\n    buffer_layout_1.seq(perpAccountLayout(), exports.MAX_PAIRS, 'perpAccounts'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), exports.MAX_PERP_OPEN_ORDERS, 'orderMarket'),\n    buffer_layout_1.seq(sideLayout(1), exports.MAX_PERP_OPEN_ORDERS, 'orderSide'),\n    buffer_layout_1.seq(i128(), exports.MAX_PERP_OPEN_ORDERS, 'orders'),\n    buffer_layout_1.seq(u64(), exports.MAX_PERP_OPEN_ORDERS, 'clientOrderIds'),\n    u64('msrmAmount'),\n    bool('beingLiquidated'),\n    bool('isBankrupt'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), exports.INFO_LEN, 'info'),\n    publicKeyLayout('advancedOrdersKey'),\n    bool('notUpgradable'),\n    publicKeyLayout('delegate'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), 5, 'padding'),\n]);\n/** @internal */\nexports.RootBankLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    I80F48Layout('optimalUtil'),\n    I80F48Layout('optimalRate'),\n    I80F48Layout('maxRate'),\n    u64('numNodeBanks'),\n    buffer_layout_1.seq(publicKeyLayout(), exports.MAX_NODE_BANKS, 'nodeBanks'),\n    I80F48Layout('depositIndex'),\n    I80F48Layout('borrowIndex'),\n    u64('lastUpdated'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), 64, 'padding'),\n]);\n/** @internal */\nexports.NodeBankLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    I80F48Layout('deposits'),\n    I80F48Layout('borrows'),\n    publicKeyLayout('vault'),\n]);\n/** @internal */\nexports.StubOracleLayout = buffer_layout_1.struct([\n    buffer_layout_1.seq(buffer_layout_1.u8(), 8),\n    I80F48Layout('price'),\n    u64('lastUpdate'),\n]);\n/** @internal */\nclass LiquidityMiningInfoLayout extends buffer_layout_1.Structure {\n    constructor(property) {\n        super([\n            I80F48Layout('rate'),\n            I80F48Layout('maxDepthBps'),\n            u64('periodStart'),\n            u64('targetPeriodLength'),\n            u64('mngoLeft'),\n            u64('mngoPerPeriod'),\n        ], property);\n    }\n    decode(b, offset) {\n        return new MetaData(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.LiquidityMiningInfoLayout = LiquidityMiningInfoLayout;\n/** @internal */\nfunction liquidityMiningInfoLayout(property = '') {\n    return new LiquidityMiningInfoLayout(property);\n}\nexports.liquidityMiningInfoLayout = liquidityMiningInfoLayout;\n/** @internal */\nexports.PerpMarketLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    publicKeyLayout('mangoGroup'),\n    publicKeyLayout('bids'),\n    publicKeyLayout('asks'),\n    publicKeyLayout('eventQueue'),\n    i64('quoteLotSize'),\n    i64('baseLotSize'),\n    I80F48Layout('longFunding'),\n    I80F48Layout('shortFunding'),\n    i64('openInterest'),\n    u64('lastUpdated'),\n    u64('seqNum'),\n    I80F48Layout('feesAccrued'),\n    liquidityMiningInfoLayout('liquidityMiningInfo'),\n    publicKeyLayout('mngoVault'),\n]);\nconst EVENT_SIZE = 200;\n/** @internal */\nexports.PerpEventLayout = buffer_layout_1.union(buffer_layout_1.u8('eventType'), buffer_layout_1.blob(EVENT_SIZE - 1), 'event');\nexports.PerpEventLayout.addVariant(0, buffer_layout_1.struct([\n    sideLayout(1, 'takerSide'),\n    buffer_layout_1.u8('makerSlot'),\n    bool('makerOut'),\n    buffer_layout_1.u8('version'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), 3),\n    u64('timestamp'),\n    u64('seqNum'),\n    publicKeyLayout('maker'),\n    i128('makerOrderId'),\n    u64('makerClientOrderId'),\n    I80F48Layout('makerFee'),\n    i64('bestInitial'),\n    u64('makerTimestamp'),\n    publicKeyLayout('taker'),\n    i128('takerOrderId'),\n    u64('takerClientOrderId'),\n    I80F48Layout('takerFee'),\n    i64('price'),\n    i64('quantity'),\n]), 'fill');\nexports.PerpEventLayout.addVariant(1, buffer_layout_1.struct([\n    sideLayout(1, 'side'),\n    buffer_layout_1.u8('slot'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), 5),\n    u64('timestamp'),\n    u64('seqNum'),\n    publicKeyLayout('owner'),\n    i64('quantity'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), EVENT_SIZE - 64, 'padding'),\n]), 'out');\nexports.PerpEventLayout.addVariant(2, buffer_layout_1.struct([\n    buffer_layout_1.seq(buffer_layout_1.u8(), 7),\n    u64('timestamp'),\n    u64('seqNum'),\n    publicKeyLayout('liqee'),\n    publicKeyLayout('liqor'),\n    I80F48Layout('price'),\n    i64('quantity'),\n    I80F48Layout('liquidationFee'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), EVENT_SIZE - 128, 'padding'),\n]), 'liquidate');\n/** @internal */\nexports.PerpEventQueueHeaderLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    u64('head'),\n    u64('count'),\n    u64('seqNum'),\n]);\n/** @internal */\nexports.PerpEventQueueLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    u64('head'),\n    u64('count'),\n    u64('seqNum'),\n    buffer_layout_1.seq(exports.PerpEventLayout, buffer_layout_1.greedy(exports.PerpEventLayout.span), 'events'),\n]);\nconst BOOK_NODE_SIZE = 88;\nconst BOOK_NODE_LAYOUT = buffer_layout_1.union(buffer_layout_1.u32('tag'), buffer_layout_1.blob(BOOK_NODE_SIZE - 4), 'node');\nBOOK_NODE_LAYOUT.addVariant(0, buffer_layout_1.struct([]), 'uninitialized');\nBOOK_NODE_LAYOUT.addVariant(1, buffer_layout_1.struct([\n    // Only the first prefixLen high-order bits of key are meaningful\n    buffer_layout_1.u32('prefixLen'),\n    u128('key'),\n    buffer_layout_1.seq(buffer_layout_1.u32(), 2, 'children'),\n]), 'innerNode');\nBOOK_NODE_LAYOUT.addVariant(2, buffer_layout_1.struct([\n    buffer_layout_1.u8('ownerSlot'),\n    orderTypeLayout('orderType', 1),\n    buffer_layout_1.u8('version'),\n    buffer_layout_1.u8('timeInForce'),\n    u128('key'),\n    publicKeyLayout('owner'),\n    u64('quantity'),\n    u64('clientOrderId'),\n    u64('bestInitial'),\n    u64('timestamp'),\n]), 'leafNode');\nBOOK_NODE_LAYOUT.addVariant(3, buffer_layout_1.struct([buffer_layout_1.u32('next')]), 'freeNode');\nBOOK_NODE_LAYOUT.addVariant(4, buffer_layout_1.struct([]), 'lastFreeNode');\n/** @internal */\nexports.BookSideLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    buffer_layout_1.nu64('bumpIndex'),\n    buffer_layout_1.nu64('freeListLen'),\n    buffer_layout_1.u32('freeListHead'),\n    buffer_layout_1.u32('rootNode'),\n    buffer_layout_1.nu64('leafCount'),\n    buffer_layout_1.seq(BOOK_NODE_LAYOUT, MAX_BOOK_NODES, 'nodes'),\n]);\nclass PriceCache {\n    constructor(decoded) {\n        Object.assign(this, decoded);\n    }\n}\nexports.PriceCache = PriceCache;\n/** @internal */\nclass PriceCacheLayout extends buffer_layout_1.Structure {\n    constructor(property) {\n        super([I80F48Layout('price'), u64('lastUpdate')], property);\n    }\n    decode(b, offset) {\n        return new PriceCache(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.PriceCacheLayout = PriceCacheLayout;\n/** @internal */\nfunction priceCacheLayout(property = '') {\n    return new PriceCacheLayout(property);\n}\nexports.priceCacheLayout = priceCacheLayout;\nclass RootBankCache {\n    constructor(decoded) {\n        Object.assign(this, decoded);\n    }\n}\nexports.RootBankCache = RootBankCache;\n/** @internal */\nclass RootBankCacheLayout extends buffer_layout_1.Structure {\n    constructor(property) {\n        super([\n            I80F48Layout('depositIndex'),\n            I80F48Layout('borrowIndex'),\n            u64('lastUpdate'),\n        ], property);\n    }\n    decode(b, offset) {\n        return new RootBankCache(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.RootBankCacheLayout = RootBankCacheLayout;\n/** @internal */\nfunction rootBankCacheLayout(property = '') {\n    return new RootBankCacheLayout(property);\n}\nexports.rootBankCacheLayout = rootBankCacheLayout;\nclass PerpMarketCache {\n    constructor(decoded) {\n        Object.assign(this, decoded);\n    }\n}\nexports.PerpMarketCache = PerpMarketCache;\n/** @internal */\nclass PerpMarketCacheLayout extends buffer_layout_1.Structure {\n    constructor(property) {\n        super([\n            I80F48Layout('longFunding'),\n            I80F48Layout('shortFunding'),\n            u64('lastUpdate'),\n        ], property);\n    }\n    decode(b, offset) {\n        return new PerpMarketCache(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nexports.PerpMarketCacheLayout = PerpMarketCacheLayout;\n/** @internal */\nfunction perpMarketCacheLayout(property = '') {\n    return new PerpMarketCacheLayout(property);\n}\nexports.perpMarketCacheLayout = perpMarketCacheLayout;\n/** @internal */\nexports.MangoCacheLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    buffer_layout_1.seq(priceCacheLayout(), exports.MAX_PAIRS, 'priceCache'),\n    buffer_layout_1.seq(rootBankCacheLayout(), exports.MAX_TOKENS, 'rootBankCache'),\n    buffer_layout_1.seq(perpMarketCacheLayout(), exports.MAX_PAIRS, 'perpMarketCache'),\n]);\nclass MangoCache {\n    constructor(publicKey, decoded) {\n        this.publicKey = publicKey;\n        Object.assign(this, decoded);\n    }\n    getPrice(tokenIndex) {\n        return tokenIndex === exports.QUOTE_INDEX\n            ? fixednum_1.ONE_I80F48\n            : this.priceCache[tokenIndex].price;\n    }\n}\nexports.MangoCache = MangoCache;\nclass NodeBank {\n    constructor(publicKey, decoded) {\n        this.publicKey = publicKey;\n        Object.assign(this, decoded);\n    }\n}\nexports.NodeBank = NodeBank;\n/** @internal */\nexports.TokenAccountLayout = buffer_layout_1.struct([\n    publicKeyLayout('mint'),\n    publicKeyLayout('owner'),\n    buffer_layout_1.nu64('amount'),\n    buffer_layout_1.blob(93),\n]);\nconst ADVANCED_ORDER_SIZE = 80;\nconst ADVANCED_ORDER_LAYOUT = buffer_layout_1.union(buffer_layout_1.u8('advancedOrderType'), buffer_layout_1.blob(ADVANCED_ORDER_SIZE - 1), 'advancedOrder');\nADVANCED_ORDER_LAYOUT.addVariant(0, buffer_layout_1.struct([\n    bool('isActive'),\n    buffer_layout_1.u8('marketIndex'),\n    orderTypeLayout('orderType', 1),\n    sideLayout(1, 'side'),\n    triggerConditionLayout('triggerCondition', 1),\n    bool('reduceOnly'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), 1, 'padding0'),\n    u64('clientOrderId'),\n    i64('price'),\n    i64('quantity'),\n    I80F48Layout('triggerPrice'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), 32, 'padding1'),\n]), 'perpTrigger');\nconst MAX_ADVANCED_ORDERS = 32;\nexports.AdvancedOrdersLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    buffer_layout_1.seq(ADVANCED_ORDER_LAYOUT, MAX_ADVANCED_ORDERS, 'orders'),\n]);\n/** @internal */\nclass ReferrerMemory {\n    constructor(decoded) {\n        Object.assign(this, decoded);\n    }\n}\nexports.ReferrerMemory = ReferrerMemory;\n/** @internal */\nexports.ReferrerMemoryLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    publicKeyLayout('referrerMangoAccount'),\n]);\n/** @internal */\nclass ReferrerIdRecord {\n    constructor(decoded) {\n        Object.assign(this, decoded);\n    }\n    get referrerId() {\n        return this.id\n            ? String.fromCharCode(...this.id).replace(new RegExp(String.fromCharCode(0), 'g'), '')\n            : '';\n    }\n}\nexports.ReferrerIdRecord = ReferrerIdRecord;\n/** @internal */\nexports.ReferrerIdRecordLayout = buffer_layout_1.struct([\n    metaDataLayout('metaData'),\n    publicKeyLayout('referrerMangoAccount'),\n    buffer_layout_1.seq(buffer_layout_1.u8(), exports.INFO_LEN, 'id'),\n]);\n//# sourceMappingURL=layout.js.map"]},"metadata":{},"sourceType":"script"}