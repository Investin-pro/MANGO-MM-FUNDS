{"ast":null,"code":"import { IdlCoder } from \"./idl\";\n/**\n * Encodes and decodes user defined types.\n */\n\nexport class TypesCoder {\n  constructor(idl) {\n    if (idl.types === undefined) {\n      this.layouts = new Map();\n      return;\n    }\n\n    const layouts = idl.types.map(acc => {\n      return [acc.name, IdlCoder.typeDefLayout(acc, idl.types)];\n    }); // @ts-ignore\n\n    this.layouts = new Map(layouts);\n  }\n\n  encode(accountName, account) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n\n    const layout = this.layouts.get(accountName);\n    const len = layout.encode(account, buffer);\n    return buffer.slice(0, len);\n  }\n\n  decode(accountName, ix) {\n    const layout = this.layouts.get(accountName);\n    return layout.decode(ix);\n  }\n\n}","map":{"version":3,"sources":["../../../src/coder/types.ts"],"names":[],"mappings":"AAEA,SAAS,QAAT,QAAyB,OAAzB;AAEA;;AAEG;;AACH,OAAM,MAAO,UAAP,CAAiB;AAMrB,EAAA,WAAA,CAAmB,GAAnB,EAA2B;AACzB,QAAI,GAAG,CAAC,KAAJ,KAAc,SAAlB,EAA6B;AAC3B,WAAK,OAAL,GAAe,IAAI,GAAJ,EAAf;AACA;AACD;;AACD,UAAM,OAAO,GAAG,GAAG,CAAC,KAAJ,CAAU,GAAV,CAAe,GAAD,IAAQ;AACpC,aAAO,CAAC,GAAG,CAAC,IAAL,EAAW,QAAQ,CAAC,aAAT,CAAuB,GAAvB,EAA4B,GAAG,CAAC,KAAhC,CAAX,CAAP;AACD,KAFe,CAAhB,CALyB,CASzB;;AACA,SAAK,OAAL,GAAe,IAAI,GAAJ,CAAQ,OAAR,CAAf;AACD;;AAEM,EAAA,MAAM,CAAU,WAAV,EAA+B,OAA/B,EAAyC;AACpD,UAAM,MAAM,GAAG,MAAM,CAAC,KAAP,CAAa,IAAb,CAAf,CADoD,CACjB;;AACnC,UAAM,MAAM,GAAG,KAAK,OAAL,CAAa,GAAb,CAAiB,WAAjB,CAAf;AACA,UAAM,GAAG,GAAG,MAAM,CAAC,MAAP,CAAc,OAAd,EAAuB,MAAvB,CAAZ;AACA,WAAO,MAAM,CAAC,KAAP,CAAa,CAAb,EAAgB,GAAhB,CAAP;AACD;;AAEM,EAAA,MAAM,CAAU,WAAV,EAA+B,EAA/B,EAAyC;AACpD,UAAM,MAAM,GAAG,KAAK,OAAL,CAAa,GAAb,CAAiB,WAAjB,CAAf;AACA,WAAO,MAAM,CAAC,MAAP,CAAc,EAAd,CAAP;AACD;;AA7BoB","sourceRoot":"","sourcesContent":["import { IdlCoder } from \"./idl\";\n/**\n * Encodes and decodes user defined types.\n */\nexport class TypesCoder {\n    constructor(idl) {\n        if (idl.types === undefined) {\n            this.layouts = new Map();\n            return;\n        }\n        const layouts = idl.types.map((acc) => {\n            return [acc.name, IdlCoder.typeDefLayout(acc, idl.types)];\n        });\n        // @ts-ignore\n        this.layouts = new Map(layouts);\n    }\n    encode(accountName, account) {\n        const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n        const layout = this.layouts.get(accountName);\n        const len = layout.encode(account, buffer);\n        return buffer.slice(0, len);\n    }\n    decode(accountName, ix) {\n        const layout = this.layouts.get(accountName);\n        return layout.decode(ix);\n    }\n}\n//# sourceMappingURL=types.js.map"]},"metadata":{},"sourceType":"module"}